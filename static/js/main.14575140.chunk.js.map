{"version":3,"sources":["utils/useCheckMobile.js","components/Header.jsx","utils/parseJwt.js","utils/tokens.js","utils/auth.js","utils/dynamo.js","utils/groups.js","components/PrivateRoute.jsx","components/PublicRoute.jsx","utils/tasks.js","components/Home.jsx","components/About.jsx","components/Copyright.jsx","components/Login.jsx","components/Logout.jsx","components/Register.jsx","components/CreateGroup.jsx","components/JoinGroup.jsx","components/Tasks.jsx","components/Groups.jsx","App.js","reportWebVitals.js","index.js"],"names":["useCheckMobile","useState","windowDimension","setWindowDimension","useEffect","window","innerWidth","handleResize","addEventListener","removeEventListener","useStyles","makeStyles","theme","appBar","zIndex","drawer","title","margin","spacing","textTransform","textAlign","color","logoButton","padding","navButton","width","backgroundColor","navButtonSelected","palette","secondary","light","main","drawerDiv","height","overflow","display","flexDirection","drawerPaperMobile","drawerPaper","paperAnchorLeftMobile","paperAnchorLeft","navLinks","Header","props","classes","handleLoadGroups","groupsStatus","groups","groupsError","location","useLocation","selectedGroup","setSelectedGroup","selectedGroupID","setSelectedGroupID","forEach","group","pathname","startsWith","groupID","S","groupName","isMobile","onscroll","document","body","scrollTop","documentElement","setNavElevation","navElevation","drawerOpen","setDrawerOpen","Fragment","AppBar","position","elevation","className","Toolbar","IconButton","onClick","Button","component","RouterLink","to","Typography","variant","style","flexGrow","Drawer","anchor","open","paper","flexShrink","onClose","List","map","text","index","ListItem","button","selected","ListItemIcon","ListItemText","primary","Divider","ListSubheader","disableSticky","marginTop","marginBottom","Grid","container","direction","alignItems","justify","item","xs","CircularProgress","parseJwt","token","base64","split","replace","jsonPayload","decodeURIComponent","atob","c","charCodeAt","toString","slice","join","JSON","parse","REFRESH_TOKEN","initialMemoryTokens","idToken","accessToken","exp","inMemoryTokens","setTokens","Math","min","getTokens","ceil","Date","now","setRefreshToken","localStorage","setItem","getRefreshToken","getItem","clearTokens","removeItem","authCognitoClient","IDENTITY_POOL_ID","REGION","COGNITO_ID","COGNITO_CLIENT_ID","cognitoClient","CognitoIdentityProviderClient","region","login","username","password","a","send","InitiateAuthCommand","AuthFlow","ClientId","AuthParameters","USERNAME","PASSWORD","response","credentials","fromCognitoIdentityPool","client","CognitoIdentityClient","identityPoolId","logins","AuthenticationResult","IdToken","AccessToken","RefreshToken","success","message","register","name","SignUpCommand","Username","Password","UserAttributes","Name","Value","ClientMetadata","process","logout","getValidTokens","refreshToken","RevokeTokenCommand","Token","curTokens","refreshTokens","dynamoClient","getNewDynamoClient","tokens","DynamoDB","generateGroupID","id","i","dig","floor","random","chr","String","fromCharCode","concat","generateValidGroupID","works","groupCode","startTime","console","log","getParams","TableName","Key","GetItemCommand","Item","createGroup","parsedToken","ownerName","ownerID","putGroupParams","N","SS","PutItemCommand","putUserGroupParams","response2","joinGroup","userID","userName","getGroupParams","updateGroupParams","ConditionExpression","UpdateExpression","ExpressionAttributeNames","ExpressionAttributeValues","UpdateItemCommand","response3","listGroups","queryParams","KeyConditionExpression","QueryCommand","listUsersInGroup","IndexName","removeUserFromGroup","user","role","deleteParams","DeleteItemCommand","deleteGroup","PrivateRoute","Component","rest","authenticated","setAuthenticated","then","result","catch","err","setGroups","setGroupsStatus","setGroupsError","Items","render","minHeight","state","from","listUserTasks","listUserGroupTasks","listGroupTasks","createTask","taskName","taskDescription","taskDays","length","taskID","uuidv4","putParams","getTask","deleteTask","day","dayIncluded","Home","userTasks","setUserTasks","userTasksStatus","setUserTasksStatus","userTasksMessage","setUserTasksMessage","days","handleGetUserTasks","disabled","task","justifyContent","substring","marginLeft","included","includes","About","Copyright","align","Link","href","link","getFullYear","wrapper","avatar","form","buttonProgress","blue","top","left","Login","history","useHistory","setUsername","setPassword","loginStatus","setLoginStatus","errorMessage","setErrorMessage","event","preventDefault","push","setTimeout","Container","maxWidth","CssBaseline","Avatar","onSubmit","TextField","required","fullWidth","label","type","autoComplete","value","onInput","target","autoFocus","Collapse","in","Card","marginRight","size","fontSize","Box","mt","Logout","logoutStatus","setLogoutStatus","handleLogout","Register","setName","registerStatus","setRegisterStatus","responseMessage","setResponseMessage","CreateGroup","setGroupName","disableElevation","JoinGroup","setGroupCode","toUpperCase","backdrop","closeButton","chips","flexWrap","chip","formControl","minWidth","formControl2","Tasks","groupUsers","useRouteMatch","path","url","tasks","setTasks","tasksStatus","setTasksStatus","tasksMessage","setTasksMessage","filterUser","setFilterUser","handleGetTasks","showCreateTask","setShowCreateTask","setTaskName","setTaskDescription","selectedDays","setSelectedDays","assignedUser","setAssignedUser","handleCloseCreateTask","createTaskStatus","setCreateTaskStatus","setCreateTaskMessage","deleteTaskID","setDeleteTaskID","deleteTaskStatus","setDeleteTaskStatus","setDeleteTaskMessage","exact","paddingLeft","paddingRight","FormControl","InputLabel","Select","labelId","onChange","e","MenuProps","onExited","activeElement","blur","MenuItem","ListItemSecondaryAction","edge","handleDeleteTask","Dialog","float","right","multiline","multiple","input","Input","renderValue","Chip","Checkbox","checked","Task","useParams","setTask","taskStatus","setTaskStatus","taskMessage","setTaskMessage","handleGetTask","Groups","bottomNavLinks","icon","adminOnly","Group","navigation","setNavigation","val","setGroup","groupAuth","setGroupAuth","groupAuthMessage","setGroupAuthMessage","setGroupUsers","groupUsersStatus","setGroupUsersStatus","groupUsersMessage","setGroupUsersMessage","handleGetGroupUsers","deleteUserID","setDeleteUserID","deleteUserStatus","setDeleteUserStatus","setDeleteUserMessage","handleRemoveUser","setDeleteGroupStatus","setDeleteGroupMessage","borderColor","BottomNavigation","showLabels","newValue","bottom","nav","BottomNavigationAction","textDecoration","App","createMuiTheme","ThemeProvider","basename","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.14575140.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nconst mobileThreshold = 800;\r\n\r\nexport default function useCheckMobile() {\r\n  const [windowDimension, setWindowDimension] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setWindowDimension(window.innerWidth);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimension(window.innerWidth);\r\n    }\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []);\r\n\r\n  const isMobile = windowDimension <= mobileThreshold;\r\n  return isMobile;\r\n}","import React, { useState, useEffect } from 'react';\r\nimport {Link as RouterLink, useLocation } from \"react-router-dom\";\r\n\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\n\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport useCheckMobile from '../utils/useCheckMobile';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  title: {\r\n    margin: theme.spacing(1, 0, 1),\r\n    textTransform: \"none\",\r\n    textAlign: \"left\",\r\n    color: '#333',\r\n  },\r\n  logoButton: {\r\n    padding: theme.spacing(0),\r\n    textAlign: \"left\",\r\n  },\r\n  navButton: {\r\n    color: '#333',\r\n    width: '100%',\r\n    '&:hover':{\r\n      backgroundColor: '#ddd',\r\n    }\r\n  },\r\n  navButtonSelected: {\r\n    color: '#333',\r\n    width: '100%',\r\n    backgroundColor: theme.palette.secondary.light,\r\n    '&:hover':{\r\n      backgroundColor: theme.palette.secondary.main,\r\n    }\r\n  },\r\n  drawerDiv: {\r\n    height: '100vh',\r\n    // backgroundColor: theme.palette.primary.main,\r\n    overflow: 'auto',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  drawerPaperMobile: {\r\n    width: '80%',\r\n  },\r\n  drawerPaper: {\r\n    width: '20rem',\r\n  },\r\n  paperAnchorLeftMobile: {\r\n    width: '80%',\r\n  },\r\n  paperAnchorLeft: {\r\n    width: '20rem',\r\n  },\r\n}));\r\n\r\nconst navLinks = [\r\n  ['Home', '/', <HomeIcon/>], \r\n  ['Create group', '/createGroup', <CreateIcon/>],\r\n  ['Join group', '/joinGroup', <AddIcon/>],\r\n];\r\n\r\nexport default function Header(props) {\r\n  const classes = useStyles();\r\n\r\n  const { handleLoadGroups, groupsStatus, groups, groupsError } = props;\r\n  useEffect(() => {\r\n    handleLoadGroups();\r\n  }, []);\r\n\r\n  const location = useLocation();\r\n\r\n  const [selectedGroup, setSelectedGroup] = useState('');\r\n  const [selectedGroupID, setSelectedGroupID] = useState('');\r\n\r\n  useEffect(() => {\r\n    setSelectedGroup('');\r\n    setSelectedGroupID('');\r\n    groups.forEach(group => {\r\n      if (location.pathname.startsWith(`/groups/${group.groupID.S}`)) {\r\n        setSelectedGroup(group.groupName.S);\r\n        setSelectedGroupID(group.groupID.S);\r\n      }\r\n    });\r\n  }, [groups, location])\r\n  \r\n  // mobile\r\n  const isMobile = useCheckMobile();\r\n\r\n  // Scroll effects\r\n  useEffect(() => {\r\n    window.onscroll = () => {\r\n      scrollFunction()\r\n    }\r\n  });\r\n\r\n  const [navElevation, setNavElevation] = useState(0);\r\n\r\n  function scrollFunction() {\r\n    const scroll = document.body.scrollTop || document.documentElement.scrollTop;\r\n    if(scroll === 0) {\r\n      setNavElevation(0);\r\n    } else {\r\n      setNavElevation(4);\r\n    }\r\n  }\r\n\r\n\r\n  // Menu \r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n\r\n  // render\r\n  return (\r\n    <React.Fragment>\r\n      <AppBar position='fixed' elevation={navElevation} className={isMobile || classes.appBar}>\r\n        <Toolbar>\r\n          {isMobile && <div>\r\n            <IconButton className={classes.navButton} onClick={() => setDrawerOpen(true)}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n          </div>}\r\n          <div>\r\n            <Button component={RouterLink} to=\"/\" className={classes.logoButton}>\r\n              {/* <img src=\"http://usaco.org/current/images/usaco_logo.png\" alt=\"logo\" className={classes.logo} style={{\r\n                maxHeight: logoRatio*navHeight,\r\n                transition: navTransitionSpeed,\r\n              }}/> */}\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Chores\r\n              </Typography>\r\n            </Button>\r\n          </div>\r\n          <div style={{flexGrow: 1}}></div>\r\n          <div><Typography variant='h5'>{selectedGroup}</Typography></div>\r\n          <div style={{flexGrow: 1}}></div>\r\n          {/*isMobile || <div>\r\n            <Button variant='contained' color='secondary' className={classes.navButton} component={RouterLink} to={'/logout'}>\r\n              Logout\r\n            </Button>\r\n          </div> */ }\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Drawer \r\n        variant={isMobile ? 'temporary' : 'permanent'}\r\n        anchor='left'\r\n        open={drawerOpen}\r\n        classes={{\r\n          paperAnchorLeft: isMobile ? classes.paperAnchorLeftMobile : classes.paperAnchorLeft,\r\n          paper: isMobile ? classes.drawerPaperMobile : classes.drawerPaper,\r\n        }}\r\n        style={{\r\n          width: isMobile ? '80%' : '20rem',\r\n          flexShrink: 0,\r\n        }}\r\n        onClose={() => setDrawerOpen(false)}\r\n      >\r\n        {isMobile || <Toolbar/>}\r\n        <div className={classes.drawerDiv}>\r\n          {/*isMobile && <Button\r\n            onClick={() => setDrawerOpen(false)}\r\n            className={classes.navButtonMobile}\r\n            style={{ height: `${Math.floor(100 / (navLinks.length + 2))}%`, maxHeight: 100 }}\r\n            onMouseEnter={handleHovering}\r\n            onMouseLeave={handleUnhovering}\r\n          >\r\n            <CloseIcon />\r\n          </Button>*/}\r\n          <List style={{overflow:'auto'}}>\r\n            {navLinks.map((text, index) => (\r\n              <ListItem button key={`navlink-${index}`} component={RouterLink} to={text[1]}\r\n                onClick={() => setDrawerOpen(false)}\r\n                className={props.selected === text[1] ? classes.navButtonSelected : classes.navButton}\r\n              >\r\n                <ListItemIcon>{text[2]}</ListItemIcon>\r\n                <ListItemText primary={text[0]}/>\r\n              </ListItem>\r\n            ))}\r\n            <Divider/>\r\n            <ListSubheader disableSticky>\r\n              <Typography variant='h6' style={{marginTop: '1rem',marginBottom: '.5rem'}}>\r\n                Your groups\r\n              </Typography>\r\n            </ListSubheader>\r\n            {groupsStatus === 1 && \r\n              <Grid\r\n                container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justify=\"center\"\r\n              >\r\n                <Grid item xs={3}>\r\n                  <CircularProgress/>\r\n                </Grid>\r\n              </Grid>\r\n            }\r\n            {groupsStatus === 2 && \r\n              groups.map((group, index) => (\r\n                  <ListItem button \r\n                    key={`group-${group.groupID.S}`} \r\n                    component={RouterLink}\r\n                    onClick={() => setDrawerOpen(false)}\r\n                    to={`/groups/${group.groupID.S}`}\r\n                    className={selectedGroupID === group.groupID.S ? classes.navButtonSelected : classes.navButton}\r\n                  >\r\n                    <ListItemIcon><GroupIcon/></ListItemIcon>\r\n                    <ListItemText primary={group.groupName.S} secondary={group.groupID.S}></ListItemText>\r\n                  </ListItem>\r\n              ))\r\n            }\r\n            {groupsStatus === 3 && \r\n              <Typography variant='body1' style={{color: '#e57373'}}>Error: {groupsError}</Typography>\r\n            }\r\n          </List>\r\n          <div style={{flexGrow: 1}}></div>\r\n          <Divider/>\r\n          <List><ListItem button component={RouterLink} to={'/logout'}\r\n            onClick={() => setDrawerOpen(false)}\r\n            className={classes.navButton}\r\n          >\r\n            <ListItemIcon><ExitToAppIcon/></ListItemIcon>\r\n            <ListItemText primary='Logout'/>\r\n          </ListItem></List>\r\n        </div>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}","export default function parseJwt (token) {\r\n  var base64Url = token.split('.')[1];\r\n  var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n  var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {\r\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n  }).join(''));\r\n\r\n  return JSON.parse(jsonPayload);\r\n};","import parseJwt from './parseJwt';\r\n\r\nconst REFRESH_TOKEN = 'refreshToken';\r\nconst IDENTITY_ID = 'identityID';\r\n\r\nconst initialMemoryTokens = {\r\n  idToken: null,\r\n  accessToken: null,\r\n  exp: -1,\r\n};\r\n\r\nlet inMemoryTokens = initialMemoryTokens;\r\n\r\nexport function setTokens(idToken, accessToken) {\r\n  inMemoryTokens = {\r\n    idToken: idToken,\r\n    accessToken: accessToken,\r\n    exp: Math.min(parseJwt(idToken).exp, parseJwt(accessToken).exp),\r\n  };;\r\n}\r\n\r\nexport function getTokens() {\r\n  const curTime = Math.ceil(Date.now()/1000) + 3*60; // current time in seconds + 3 minutes\r\n\r\n  // invalid tokens\r\n  if (curTime >= inMemoryTokens.exp) {\r\n    inMemoryTokens = initialMemoryTokens;\r\n  }\r\n\r\n  return inMemoryTokens;\r\n}\r\n\r\nexport function setRefreshToken(token) {\r\n  localStorage.setItem(REFRESH_TOKEN, token);\r\n}\r\n\r\nexport function getRefreshToken() {\r\n  return localStorage.getItem(REFRESH_TOKEN);\r\n}\r\n\r\n// use for better security with IAM but who cares\r\n// export function setIdentityID(identityID) {\r\n//   localStorage.setItem(IDENTITY_ID, identityID);\r\n// }\r\n\r\n// export function getIdentityID() {\r\n//   return localStorage.getItem(IDENTITY_ID);\r\n// }\r\n\r\nexport function clearTokens() {\r\n  localStorage.removeItem(REFRESH_TOKEN);\r\n  localStorage.removeItem(IDENTITY_ID);\r\n  inMemoryTokens = initialMemoryTokens;\r\n}","import { InitiateAuthCommand, RevokeTokenCommand, SignUpCommand } from '@aws-sdk/client-cognito-identity-provider';\r\nimport { CognitoIdentityProviderClient } from \"@aws-sdk/client-cognito-identity-provider\";\r\nimport { fromCognitoIdentityPool } from '@aws-sdk/credential-provider-cognito-identity';\r\nimport { CognitoIdentityClient, GetIdCommand } from '@aws-sdk/client-cognito-identity';\r\n\r\nimport { clearTokens, getRefreshToken, getTokens, setRefreshToken, setTokens } from './tokens';\r\n\r\nexport const IDENTITY_POOL_ID = 'us-east-2:f1368add-2f4b-47fc-8b3c-8b65a1c909cb';\r\nexport const USER_POOL_ID = 'us-east-2_ZiUGD7hem';\r\nexport const REGION ='us-east-2';\r\nexport const COGNITO_ID = 'cognito-idp.'+REGION+'.amazonaws.com/'+USER_POOL_ID;\r\nconst COGNITO_CLIENT_ID = 'deg51c9v98amenr0il094snqc';\r\n\r\nconst cognitoClient = new CognitoIdentityProviderClient({\r\n  region: REGION,\r\n});\r\n\r\nlet authCognitoClient;\r\n\r\nexport async function login(username, password) {\r\n  try {\r\n    const response = await cognitoClient.send(new InitiateAuthCommand({\r\n      AuthFlow: 'USER_PASSWORD_AUTH',\r\n      ClientId: COGNITO_CLIENT_ID,\r\n      AuthParameters: {\r\n        USERNAME: username,\r\n        PASSWORD: password,\r\n      },\r\n    }));\r\n    \r\n    \r\n    authCognitoClient = new CognitoIdentityProviderClient({\r\n      region: REGION,\r\n      credentials: fromCognitoIdentityPool({\r\n        client: new CognitoIdentityClient({ region: REGION }),\r\n        identityPoolId: IDENTITY_POOL_ID,\r\n        logins: {\r\n          [COGNITO_ID]: response.AuthenticationResult.IdToken,\r\n        },\r\n        // userIdentifier: username,\r\n      }),\r\n    });\r\n\r\n    setTokens(response.AuthenticationResult.IdToken, response.AuthenticationResult.AccessToken);\r\n    setRefreshToken(response.AuthenticationResult.RefreshToken);\r\n\r\n    return {success: true, message: 'success', response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\nexport async function register(username, password, name) {\r\n  try {\r\n    const response = await cognitoClient.send(new SignUpCommand({\r\n      ClientId: COGNITO_CLIENT_ID,\r\n      Username: username,\r\n      Password: password,\r\n      UserAttributes: [\r\n        {Name: 'name', Value: name},\r\n      ],\r\n      ClientMetadata: {\r\n        'secretKey': process.env.REACT_APP_AUTO_CONFIRM_KEY,\r\n      },\r\n    }));\r\n\r\n    // log in auto after regsistering? \r\n    // need to add user to dynamo table...\r\n    // admin user: create group, regular: add to group\r\n\r\n    return {success: true, message: 'success', response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\nexport async function logout() {\r\n\r\n  if (!authCognitoClient) {\r\n    authCognitoClient = new CognitoIdentityProviderClient({\r\n      region: REGION,\r\n      credentials: fromCognitoIdentityPool({\r\n        client: new CognitoIdentityClient({ region: REGION }),\r\n        identityPoolId: IDENTITY_POOL_ID,\r\n        logins: {\r\n          [COGNITO_ID]: (await getValidTokens()).idToken,\r\n        },\r\n        // userIdentifier: username,\r\n      }),\r\n    });\r\n  }\r\n\r\n  const refreshToken = getRefreshToken();\r\n  if (!refreshToken) {\r\n    return {success: true, message: 'no tokens to revoke'};\r\n  }\r\n\r\n  clearTokens();\r\n\r\n  try {\r\n    const response = await authCognitoClient.send(new RevokeTokenCommand({\r\n      ClientId: COGNITO_CLIENT_ID,\r\n      Token: refreshToken,\r\n    }));\r\n\r\n    authCognitoClient = null;\r\n    \r\n    return {success: true, message: 'logged out succesfully', response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\nexport async function getValidTokens() {\r\n  const curTokens = getTokens();\r\n\r\n  if (curTokens.idToken && curTokens.accessToken) {\r\n    return curTokens;\r\n  }\r\n\r\n  const result = await refreshTokens();\r\n\r\n  if (result.success) {\r\n    return getTokens();\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport async function refreshTokens() {\r\n  const refreshToken = getRefreshToken();\r\n  if (!refreshToken) {\r\n    return {success: false, message: 'no refresh token found.'};\r\n  }\r\n\r\n  try {\r\n    const response = await cognitoClient.send(new InitiateAuthCommand({\r\n      AuthFlow: 'REFRESH_TOKEN_AUTH',\r\n      ClientId: COGNITO_CLIENT_ID,\r\n      AuthParameters: {\r\n        REFRESH_TOKEN: refreshToken,\r\n      },\r\n    }));\r\n\r\n    setTokens(response.AuthenticationResult.IdToken, response.AuthenticationResult.AccessToken);\r\n\r\n    return {success: true, message: 'success'};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\n// export async function getValidIdentityID() {\r\n//   let identityID = getIdentityID();\r\n//   if (identityID) {\r\n//     return {success: true, identityID};\r\n//   }\r\n\r\n//   const tokens = await getValidTokens();\r\n\r\n//   if (!tokens) {\r\n//     return {success: false, message: 'no valid tokens'};\r\n//   }\r\n\r\n//   try {\r\n//     const identityClient = new CognitoIdentityClient({ region: REGION });\r\n\r\n//     const response = await identityClient.send(new GetIdCommand({\r\n//       IdentityPoolId: IDENTITY_POOL_ID,\r\n//       Logins: {\r\n//         [COGNITO_ID]: tokens.idToken,\r\n//       },\r\n//     }));\r\n\r\n//     setIdentityID(response.identityID);\r\n//     return {success: true, identityID: response.identityID};\r\n//   } catch (err) {\r\n//     return {success: false, message: err.message};\r\n//   }\r\n// }\r\n","import  { DynamoDB } from '@aws-sdk/client-dynamodb';\r\nimport { fromCognitoIdentityPool } from '@aws-sdk/credential-provider-cognito-identity';\r\nimport { CognitoIdentityClient } from '@aws-sdk/client-cognito-identity';\r\nimport { getValidTokens, IDENTITY_POOL_ID, COGNITO_ID, REGION } from './auth';\r\n\r\nlet dynamoClient;\r\n\r\nexport async function getNewDynamoClient() {\r\n  const tokens = await getValidTokens();\r\n  if (!tokens) {\r\n    return {success: false, message: 'no valid tokens'};\r\n  }\r\n\r\n  dynamoClient = new DynamoDB({\r\n    region: REGION, \r\n    credentials: fromCognitoIdentityPool({\r\n      client: new CognitoIdentityClient({ region: REGION }),\r\n      identityPoolId: IDENTITY_POOL_ID,\r\n      logins: {\r\n        [COGNITO_ID]: tokens.idToken,\r\n      },\r\n      // userIdentifier: username,\r\n    }),\r\n  });\r\n\r\n  return {success: true, dynamoClient, tokens};\r\n}","import  { PutItemCommand, GetItemCommand, UpdateItemCommand, QueryCommand, DeleteItemCommand } from '@aws-sdk/client-dynamodb';\r\n\r\nimport { getNewDynamoClient } from './dynamo';\r\nimport parseJwt from './parseJwt';\r\n\r\n\r\n// generates a group id using only numbers and upper case letters \r\n// 36^6 = 2*10^9 codes\r\nfunction generateGroupID() {\r\n  const length = 6;\r\n  let id = '';\r\n  for(let i = 0; i < length; i++) {\r\n    const dig = Math.floor(Math.random()*36);\r\n    let chr =''\r\n    if (dig < 10) {\r\n      chr = dig.toString();\r\n    } else {\r\n      chr = String.fromCharCode(dig - 10 + 65);\r\n    }\r\n    id = id.concat(chr);\r\n  }\r\n\r\n  return id;\r\n}\r\n\r\nexport async function generateValidGroupID(dynamoClient=null) {\r\n\r\n  if(!dynamoClient) {\r\n    const client = await getNewDynamoClient();\r\n    if (!client.success) {\r\n      return {success: false, message: client.message};\r\n    }\r\n\r\n    dynamoClient = client.dynamoClient;\r\n  }\r\n\r\n  let works = false;\r\n  let groupCode='';\r\n\r\n  const startTime = Date.now(); // cur time in ms\r\n\r\n  while(!works) {\r\n    // timeout after 5 secs\r\n    if (Date.now() - startTime > 5000){\r\n      return {success: false, message: 'timed out before valid id was found'};\r\n    }\r\n\r\n    groupCode = generateGroupID();\r\n    console.log('trying id:', groupCode);\r\n\r\n    try {\r\n      const getParams ={\r\n        TableName: 'chore-web-app-groups',\r\n        Key: {\r\n          groupID: {'S': groupCode},\r\n        },\r\n      }\r\n  \r\n      const response = await dynamoClient.send(new GetItemCommand(getParams));\r\n      \r\n      console.log(response);\r\n      if(response.Item) {\r\n        works = false;\r\n      } else {\r\n        works = true;\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n      return {success: false, message: err.message};\r\n    }\r\n  }\r\n\r\n  console.log('found valid id:', groupCode);\r\n  return {success: true, groupCode};\r\n}\r\n\r\n\r\nexport async function createGroup(groupName) {\r\n\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  const groupID = await generateValidGroupID(dynamoClient);\r\n  if (!groupID.success) {\r\n    return {success: false, message: groupID.message};\r\n  }\r\n\r\n  const parsedToken = parseJwt(client.tokens.idToken);\r\n  const ownerName = parsedToken['name'];\r\n  const ownerID = parsedToken['cognito:username']\r\n\r\n  try {\r\n    const putGroupParams = {\r\n      TableName: 'chore-web-app-groups',\r\n      Item: {\r\n        'groupID': {S: groupID.groupCode},\r\n        'groupName': {S: groupName},\r\n        'numUsers': {N : '1'},\r\n        'ownerID': {S: ownerID},\r\n        'ownerName': {S: ownerName},\r\n        'users': {SS: [ownerID]},\r\n      },\r\n    };\r\n\r\n    const response = await dynamoClient.send(new PutItemCommand(putGroupParams));\r\n    \r\n    const putUserGroupParams = {\r\n      TableName: 'chore-web-app-usergroups',\r\n      Item: {\r\n        'userID': {S: ownerID},\r\n        'groupID': {S: groupID.groupCode},\r\n        'userName': {S: ownerName},\r\n        'groupName': {S: groupName},\r\n        'role': {S: 'owner'},\r\n      },\r\n    };\r\n\r\n    const response2 = await dynamoClient.send(new PutItemCommand(putUserGroupParams));\r\n\r\n    return {success: true, response, response2};\r\n  } catch(err) {\r\n    console.log(err);\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\nexport async function joinGroup(groupCode) {\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  const parsedToken = parseJwt(client.tokens.idToken)\r\n  const userID = parsedToken['cognito:username'];\r\n  const userName = parsedToken['name'];\r\n\r\n  try {\r\n\r\n    const getGroupParams = {\r\n      TableName: 'chore-web-app-groups',\r\n      Key: {\r\n        groupID: {'S': groupCode},\r\n      },\r\n    }\r\n\r\n    const response = await dynamoClient.send(new GetItemCommand(getGroupParams));\r\n\r\n    if (!response.Item) {\r\n      return {success: false, message: 'Invalid group code'};\r\n    }\r\n\r\n    const updateGroupParams = {\r\n      TableName: 'chore-web-app-groups',\r\n      Key: {\r\n        groupID: {'S': groupCode},\r\n      },\r\n      ConditionExpression: 'attribute_exists(#u) AND NOT contains(#u, :userID)',\r\n      UpdateExpression: 'ADD #u :userIDSet, numUsers :one',\r\n      ExpressionAttributeNames: {\r\n        '#u':'users',\r\n      },\r\n      ExpressionAttributeValues: {\r\n        ':userID': {S: userID},\r\n        ':userIDSet': {SS: [userID]},\r\n        ':one': {N: '1'},\r\n      },\r\n    };\r\n\r\n    const response2 = await dynamoClient.send(new UpdateItemCommand(updateGroupParams));\r\n\r\n    const putUserGroupParams = {\r\n      TableName: 'chore-web-app-usergroups',\r\n      Item: {\r\n        'userID': {S: userID},\r\n        'groupID': {S: groupCode},\r\n        'userName': {S: userName},\r\n        'groupName': {S: response.Item.groupName.S},\r\n        'role': {S: 'regular'},\r\n      },\r\n    };\r\n\r\n    const response3 = await dynamoClient.send(new PutItemCommand(putUserGroupParams));\r\n\r\n    return {success: true, response, response2, response3};\r\n  } catch (err) {\r\n    if(err.message === 'The conditional request failed') {\r\n      err.message = 'You are already in this group';\r\n    }\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\nexport async function listGroups() {\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  const userID = parseJwt(client.tokens.idToken)['cognito:username'];\r\n\r\n  try {\r\n    const queryParams = {\r\n      TableName: 'chore-web-app-usergroups',\r\n      KeyConditionExpression: 'userID = :user',\r\n      ExpressionAttributeValues: {\r\n        ':user': {S: userID},\r\n      },\r\n    }\r\n\r\n    const response = await dynamoClient.send(new QueryCommand(queryParams));\r\n\r\n    return {success: true, response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n\r\n}\r\n\r\nexport async function listUsersInGroup(groupID){\r\n  if(!groupID) {\r\n    return {success: false, message: 'group id requried'};\r\n  }\r\n\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  try {\r\n    const queryParams = {\r\n      TableName: 'chore-web-app-usergroups',\r\n      IndexName: 'groupID-userID-index',\r\n      KeyConditionExpression: 'groupID = :group',\r\n      ExpressionAttributeValues: {\r\n        ':group': {S: groupID},\r\n      },\r\n    }\r\n\r\n    const response = await dynamoClient.send(new QueryCommand(queryParams));\r\n\r\n    return {success: true, response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\n// if no userID provided, use current user\r\nexport async function removeUserFromGroup(group, user) {\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n  let userID;\r\n\r\n  if(!user) {\r\n    userID = parseJwt(client.tokens.idToken)['cognito:username'];\r\n    if (group.role.S === 'owner') {\r\n      return {success: false, message: 'owner cannot leave group, delete instead'};\r\n    }\r\n  } else {\r\n    userID = user.userID.S;\r\n    if (group.role.S !== 'owner') {\r\n      return {success: false, message: 'insufficient permissions'};\r\n    } else if (user.role.S === 'owner') {\r\n      return {success: false, message: 'owner cannot leave group, delete instead'};\r\n    }\r\n  }\r\n\r\n  const groupID = group.groupID.S;\r\n\r\n  try {\r\n    const deleteParams = {\r\n      TableName: 'chore-web-app-usergroups',\r\n      Key: {\r\n        'userID': {S: userID},\r\n        'groupID': {S: groupID},\r\n      },\r\n    };\r\n\r\n    const response = await dynamoClient.send(new DeleteItemCommand(deleteParams));\r\n\r\n    const updateGroupParams = {\r\n      TableName: 'chore-web-app-groups',\r\n      Key: {\r\n        groupID: {'S': groupID},\r\n      },\r\n      ConditionExpression: 'attribute_exists(#u) AND contains(#u, :userID)',\r\n      UpdateExpression: 'ADD numUsers :one DELETE #u :userIDSet',\r\n      ExpressionAttributeNames: {\r\n        '#u':'users',\r\n      },\r\n      ExpressionAttributeValues: {\r\n        ':userID': {S: userID},\r\n        ':userIDSet': {SS: [userID]},\r\n        ':one': {N: '-1'},\r\n      },\r\n    };\r\n\r\n    const response2 = await dynamoClient.send(new UpdateItemCommand(updateGroupParams));\r\n\r\n    return {success: true, response, response2};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\n// TODO: add func\r\nexport async function deleteGroup(group) {\r\n  return {success: false, message: 'cannot delete groups at this time'};\r\n}","import { useState } from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport Header from \"./Header\";\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\n\r\nimport { getValidTokens } from '../utils/auth';\r\nimport { listGroups } from '../utils/groups';\r\n\r\nexport default function PrivateRoute({\r\n  component: Component, \r\n  selected, \r\n  ...rest\r\n}) {\r\n\r\n  const [authenticated, setAuthenticated] = useState(0); // 0 = awaiting, 1 = authenticated, -1 = failed\r\n\r\n  if(authenticated === 0) {\r\n    // Add your own authentication on the below line.\r\n    getValidTokens().then((result) => {\r\n      if (result) {\r\n        setAuthenticated(1);\r\n      } else {\r\n        setAuthenticated(-1);\r\n      }\r\n    }).catch((err) => {\r\n      console.log(err);\r\n      setAuthenticated(-1);\r\n    });\r\n  }\r\n\r\n  \r\n\r\n  // groups\r\n  const [groups, setGroups] = useState([]);\r\n  const [groupsStatus, setGroupsStatus] = useState(0); // 0 = nothing, 1 = loading, 2 = success, 3 = error\r\n  const [groupsError, setGroupsError] = useState('');\r\n\r\n  async function handleLoadGroups() {\r\n    setGroupsStatus(1);\r\n    const result = await listGroups();\r\n    \r\n    // console.log(result);\r\n\r\n    if (result.success) {\r\n      setGroups(result.response.Items);\r\n      setGroupsStatus(2);\r\n    } else {\r\n      setGroupsStatus(3);\r\n      setGroupsError(result.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Route\r\n     {...rest} \r\n     render={props =>\r\n      (authenticated === 0) ? (\r\n        <Grid\r\n          container\r\n          spacing={0}\r\n          direction=\"column\"\r\n          alignItems=\"center\"\r\n          justify=\"center\"\r\n          style={{ minHeight: '100vh' }}\r\n        >\r\n          <Grid item xs={3}>\r\n            <CircularProgress/>\r\n          </Grid>\r\n        </Grid>\r\n      ) : (\r\n        (authenticated === 1) ? (\r\n          <div style={{display: 'flex'}}>\r\n            <Header \r\n              selected={selected} \r\n              groups={groups}\r\n              groupsStatus={groupsStatus}\r\n              groupsError={groupsError}\r\n              handleLoadGroups={handleLoadGroups}\r\n            />\r\n            <main style={{flexGrow: 1, padding: '2rem'}}>\r\n              <Toolbar/>\r\n              <Component \r\n                {...props}\r\n                handleLoadGroups={handleLoadGroups}\r\n                groups={groups}\r\n                groupsStatus={groupsStatus}\r\n              />\r\n            </main>\r\n          </div>\r\n        ) : (\r\n          <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n        )\r\n      )\r\n    }/>\r\n  );\r\n}","import { useState } from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { getValidTokens } from '../utils/auth';\r\n\r\nexport default function PrivateRoute({\r\n  component: Component,\r\n  ...rest\r\n}) {\r\n\r\n  const [authenticated, setAuthenticated] = useState(0); // 0 = awaiting, 1 = authenticated, -1 = failed\r\n\r\n  if(authenticated === 0) {\r\n    // Add your own authentication on the below line.\r\n    getValidTokens().then((result) => {\r\n      if (result) {\r\n        setAuthenticated(1);\r\n      } else {\r\n        setAuthenticated(-1);\r\n      }\r\n    }).catch((err) => {\r\n      console.log(err);\r\n      setAuthenticated(-1);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Route\r\n     {...rest} \r\n     render={props =>\r\n      (authenticated === 0) ? (\r\n        <Grid\r\n          container\r\n          spacing={0}\r\n          direction=\"column\"\r\n          alignItems=\"center\"\r\n          justify=\"center\"\r\n          style={{ minHeight: '100vh' }}\r\n        >\r\n          <Grid item xs={3}>\r\n            <CircularProgress/>\r\n          </Grid>\r\n        </Grid>\r\n      ) : (\r\n        (authenticated === -1) ? (\r\n          <div>\r\n            <main>\r\n              <Component {...props}/>\r\n            </main>\r\n          </div>\r\n        ) : (\r\n          <Redirect to={{ pathname: '/', state: { from: props.location } }} />\r\n        )\r\n      )\r\n    }/>\r\n  );\r\n}","import { v4 as uuidv4 } from 'uuid';\r\nimport  { PutItemCommand, GetItemCommand, UpdateItemCommand, QueryCommand, DeleteItemCommand } from '@aws-sdk/client-dynamodb';\r\n\r\nimport { getNewDynamoClient } from './dynamo';\r\nimport parseJwt from './parseJwt';\r\n\r\n// get all of a user's tasks. if no user provided, use current user\r\nexport async function listUserTasks(userID) {\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  if(!userID) {\r\n    userID = parseJwt(client.tokens.idToken)['cognito:username'];\r\n  }\r\n\r\n  try {\r\n    const queryParams = {\r\n      TableName: 'chore-web-app-tasks',\r\n      KeyConditionExpression: 'userID = :user',\r\n      ExpressionAttributeValues: {\r\n        ':user': {S: userID},\r\n      },\r\n    };\r\n\r\n    const response = await dynamoClient.send(new QueryCommand(queryParams));\r\n\r\n    return {success: true, response};\r\n  } catch(err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\n// get all of a user's tasks in a specific group. if no user provided, use current user\r\nexport async function listUserGroupTasks(groupID, userID) {\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  if(!userID) {\r\n    userID = parseJwt(client.tokens.idToken)['cognito:username'];\r\n  }\r\n\r\n  try {\r\n    const queryParams = {\r\n      TableName: 'chore-web-app-tasks',\r\n      KeyConditionExpression: 'userID = :user AND begins_with(#g, :group)',\r\n      ExpressionAttributeValues: {\r\n        ':user': {S: userID},\r\n        ':group': {S: groupID},\r\n      },\r\n      ExpressionAttributeNames: {\r\n        '#g' : 'groupID#taskID',\r\n      },\r\n    };\r\n\r\n    const response = await dynamoClient.send(new QueryCommand(queryParams));\r\n\r\n    return {success: true, response};\r\n  } catch(err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\n// get all tasks in a group - use gsi\r\nexport async function listGroupTasks(group) {\r\n\r\n  if (!group) {\r\n    return {success: false, message: 'no group provided'};\r\n  }\r\n  if (group.role.S !== 'owner') {\r\n    return {success: false, message: 'insufficient permissions'};\r\n  }\r\n  const groupID = group.groupID.S;\r\n\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n  try {\r\n    const queryParams = {\r\n      TableName: 'chore-web-app-tasks',\r\n      IndexName: 'groupID-userID-index',\r\n      KeyConditionExpression: 'groupID = :group',\r\n      ExpressionAttributeValues: {\r\n        ':group': {S: groupID},\r\n      },\r\n    };\r\n\r\n    const response = await dynamoClient.send(new QueryCommand(queryParams));\r\n\r\n    return {success: true, response};\r\n  } catch(err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\n\r\n// get all tasks in a group assigned to a specific user - use gsi\r\n// export async function listGroupUserTasks(groupID, userID) {\r\n//   const client = await getNewDynamoClient();\r\n//   if(!client.success) {\r\n//     return {success: false, message: client.message};\r\n//   }\r\n\r\n//   const dynamoClient = client.dynamoClient;\r\n//   try {\r\n//     const queryParams = {\r\n//       TableName: 'chore-web-app-tasks',\r\n//       IndexName: 'groupID-userID-index',\r\n//       KeyConditionExpression: 'groupID = :group AND userID = :user',\r\n//       ExpressionAttributeValues: {\r\n//         ':group': {S: groupID},\r\n//         ':user': {S: userID},\r\n//       },\r\n//     };\r\n\r\n//     const response = await dynamoClient.send(new QueryCommand(queryParams));\r\n\r\n//     return {success: true, response};\r\n//   } catch(err) {\r\n//     return {success: false, message: err.message};\r\n//   }\r\n// }\r\n\r\n// create a new task with specified information\r\nexport async function createTask(group, user, taskName, taskDescription, taskDays) {\r\n  if(!group || !user || !taskName || !taskDays || taskDays.length === 0) {\r\n    return {success: false, message: 'missing required parameters'};\r\n  }\r\n  if(!taskDescription) {\r\n    taskDescription = '';\r\n  }\r\n  if(group.role.S !== 'owner') {\r\n    return {success: false, message: 'insufficient permissions'};\r\n  }\r\n\r\n  const groupID = group.groupID.S;\r\n  const userID = user.userID.S;\r\n  const userName = user.userName.S;\r\n\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  const taskID = uuidv4();\r\n\r\n  try {\r\n    const putParams = {\r\n      TableName: 'chore-web-app-tasks',\r\n      Item: {\r\n        'groupID': {S: groupID},\r\n        'userID': {S: userID},\r\n        'userName': {S: userName},\r\n        'taskName': {S: taskName},\r\n        'taskDescription': {S: taskDescription},\r\n        'taskDays': {SS: taskDays},\r\n        'groupID#taskID': {S: `${groupID}#${taskID}`},\r\n        'taskID': {S: taskID},\r\n      },\r\n    };\r\n\r\n    const response = await dynamoClient.send(new PutItemCommand(putParams));\r\n\r\n    return {success: true, response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\n// if no user id, use current user\r\nexport async function getTask(groupID, taskID, userID) {\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  if(!userID) {\r\n    userID = parseJwt(client.tokens.idToken)['cognito:username'];\r\n  } else {\r\n    // if (group.role.S !== 'owner') {\r\n    //   return {success: false, message: 'insufficient permissions'};\r\n    // }\r\n  }\r\n\r\n  try {\r\n    const getParams = {\r\n      TableName: 'chore-web-app-tasks',\r\n      Key: {\r\n        'userID': {S: userID},\r\n        'groupID#taskID': {S: `${groupID}#${taskID}`},\r\n      }\r\n    }\r\n\r\n    const response = await dynamoClient.send(new GetItemCommand(getParams));\r\n\r\n    return {success: true, response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\n// delete the given task\r\nexport async function deleteTask(userID, group, taskID) {\r\n  if(group.role.S !== 'owner') {\r\n    return {success: false, message: 'insufficient permissions'};\r\n  }\r\n\r\n  const groupID = group.groupID.S;\r\n\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n  try {\r\n    const deleteParams = {\r\n      TableName: 'chore-web-app-tasks',\r\n      Key: {\r\n        'userID': {S: userID},\r\n        'groupID#taskID': {S: `${groupID}#${taskID}`},\r\n      },\r\n    };\r\n\r\n    const response = await dynamoClient.send(new DeleteItemCommand(deleteParams));\r\n\r\n    return {success: true, response};\r\n  } catch(err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Route, Switch, useParams, Link as RouterLink, useRouteMatch, Redirect } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport { listUserTasks } from '../utils/tasks';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  day: {\r\n    margin: 2,\r\n    color: '#bbb'\r\n  },\r\n  dayIncluded: {\r\n    margin: 2,\r\n    color: '#000',\r\n  },\r\n}));\r\n\r\nexport default function Home() {\r\n  const classes = useStyles();\r\n\r\n  // tasks\r\n  const [userTasks, setUserTasks] = useState(null);\r\n  const [userTasksStatus, setUserTasksStatus] = useState(0); // 0 = waiting, 1 = loading, 2 = success, 3 = error\r\n  const [userTasksMessage, setUserTasksMessage] = useState('');\r\n  const days = [\r\n    'Sunday',\r\n    'Monday',\r\n    'Tuesday',\r\n    'Wednesday',\r\n    'Thursday',\r\n    'Friday',\r\n    'Saturday'\r\n  ];\r\n\r\n  async function handleGetUserTasks() {\r\n    setUserTasksStatus(1);\r\n    const result = await listUserTasks();\r\n    console.log(result);\r\n\r\n    if(result.success) {\r\n      setUserTasks(result.response.Items);\r\n      setUserTasksStatus(2);\r\n    } else {\r\n      setUserTasksStatus(3);\r\n      setUserTasksMessage(result.message);\r\n    }\r\n  }\r\n  useEffect(() => handleGetUserTasks(), []);\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ display: 'flex', alignItems: 'center' }}>\r\n        <IconButton disabled={userTasksStatus < 2} onClick={handleGetUserTasks}>\r\n          <RefreshIcon />\r\n        </IconButton>\r\n        <Typography variant='h6'>{userTasksStatus === 2 && userTasks && `You have ${userTasks.length} tasks`}</Typography>\r\n      </div>\r\n      {userTasksStatus === 1 ?\r\n        <CircularProgress />\r\n        : (userTasksStatus === 2 && userTasks) ?\r\n          <List style={{ marginBottom: 30 }}>\r\n            {userTasks.length === 0 && 'You do not have any tasks at this time.'}\r\n            {userTasks.map((task, index) => (\r\n              <ListItem key={`user-task-${index}-${task.taskID.S}`} button component={RouterLink} to={`/groups/${task.groupID.S}/tasks/${task.taskID.S}`}>\r\n                <div style={{ display: 'flex', width: '100%', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                  <ListItemText\r\n                    primary={task.taskName.S}\r\n                    secondary={`${task.taskDescription.S.length > 47 ? `${task.taskDescription.S.substring(0, 47)}...` : task.taskDescription.S}`}\r\n                  // style={{overflow: 'hidden'}}\r\n                  />\r\n                  <div style={{ display: 'flex', justifyContent: 'flex-end', flexGrow: 1, marginLeft: 10 }}>\r\n                    {days.map((day) => {\r\n                      const included = task.taskDays.SS.includes(day);\r\n                      return (\r\n                        //task.taskDays.SS.includes(day) ? <Chip key={day} label={day} style={{margin: 2}} /> : null\r\n                        <div className={included ? classes.dayIncluded : classes.day}>{day[0]}</div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n          :\r\n          <div>\r\n            <p>{userTasksMessage}</p>\r\n          </div>\r\n      }\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\n\r\nexport default function About() {\r\n  return (\r\n    <div>\r\n      <h1>about</h1>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n// import logo from './images/kmlogo-transparent.png';\r\nexport default function Copyright(props) {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright  '}\r\n      <Link color=\"inherit\" href={props.link || \"https://madmobileapps.com\"}>\r\n        {props.name || \"MAD Mobile Apps\"}\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Link as RouterLink, useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { blue } from '@material-ui/core/colors';\r\nimport Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport Card from '@material-ui/core/Card';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport Copyright from './Copyright';\r\nimport { login } from '../utils/auth';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  wrapper: {\r\n    margin: theme.spacing(1),\r\n    position: 'relative',\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    textAlign: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  title: {\r\n      margin: theme.spacing(0, 0, 2),\r\n  },\r\n  buttonProgress: {\r\n    color: blue[500],\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    marginTop: -8,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nexport default function Login(props) {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const [loginStatus, setLoginStatus] = useState(0); // 0 = not submitted, 1 = loading, 2 = success, 3 = error\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  async function handleLogin(event) {\r\n    event.preventDefault();\r\n    setLoginStatus(1);\r\n    \r\n    const result = await login(username, password);\r\n\r\n    console.log(result);\r\n\r\n    // TODO: add error handling\r\n    if(result.success) {\r\n      setLoginStatus(2);\r\n      history.push('/');\r\n    } else {\r\n      setLoginStatus(3);\r\n      setErrorMessage(result.message);\r\n      // allow resubmission after 5 seconds\r\n      setTimeout(() => setLoginStatus(0), 5000);\r\n    }\r\n  }\r\n\r\n  function handleUsernameChange(event) {\r\n    setUsername(event.target.value);\r\n  }\r\n  function handlePasswordChange(event) {\r\n    setPassword(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        {/*TODO: fix logo */}\r\n        {/* <img alt=\"K&M Tax Document Upload\" src={logo}/> */}\r\n        <Typography component=\"h1\" variant=\"h4\" className={classes.title}>\r\n            Chore App\r\n        </Typography>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon/>\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Log In\r\n        </Typography>\r\n        <form className={classes.form} onSubmit={handleLogin}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"username\"\r\n            label=\"Username\"\r\n            type=\"username\"\r\n            name=\"username\"\r\n            autoComplete=\"username\"\r\n            // error={emailError}\r\n            value={username}\r\n            onInput={handleUsernameChange}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n            value={password}\r\n            onInput={handlePasswordChange}\r\n          />\r\n          <Collapse in={errorMessage}>\r\n            {/* <Alert severity=\"error\">{errorMessage}</Alert> */}\r\n            <Card style={{backgroundColor: '#e57373'}}>\r\n              <div style={{display: 'flex', justifyContent: 'flex-start', alignItems: 'center', padding: 7}}>\r\n                <ErrorIcon/>\r\n                <div style={{marginLeft: 10, marginRight: 10}}>\r\n                  {errorMessage}\r\n                </div>\r\n                <div style={{flexGrow: 1}}/>\r\n                <IconButton \r\n                  onClick={() => setErrorMessage('')}\r\n                  aria-label=\"close\"\r\n                  size=\"small\"\r\n                >\r\n                  <CloseIcon fontSize=\"inherit\"/>\r\n                </IconButton>\r\n              </div>\r\n            </Card>\r\n          </Collapse>\r\n          <div className={classes.wrapper}>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={loginStatus === 1 || loginStatus === 2}\r\n            >\r\n              {loginStatus === 1 ?\r\n              <CircularProgress size={24}/>\r\n              :  \"Login\"\r\n              }\r\n            </Button>\r\n          </div>\r\n          \r\n          <Grid container justify=\"flex-end\">\r\n            <Grid item>\r\n              <Link component={RouterLink} to=\"/register\" variant=\"body2\">\r\n                Don't have an account? Register\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright name=\"MAD Mobile Apps\" link=\"https://madmobileapps.com\"/>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}","import { useState, useEffect } from 'react';\r\nimport { useHistory} from 'react-router-dom';\r\n\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { logout } from '../utils/auth';\r\n\r\nexport default function Logout() {\r\n  const history = useHistory();\r\n  \r\n  const [logoutStatus, setLogoutStatus] = useState(0); // 0 = not clicked, 1 = loading, 2 = success, 3 = error\r\n\r\n  useEffect(() => {\r\n    handleLogout();\r\n  }, []);\r\n\r\n  async function handleLogout() {\r\n    setLogoutStatus(1);\r\n\r\n    const result = await logout();\r\n\r\n    console.log(result);\r\n\r\n    if (result.success) {\r\n      history.push('/login');\r\n    } else {\r\n      setLogoutStatus(3);\r\n      // error handling\r\n      console.log('error logging out');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={0}\r\n      direction=\"column\"\r\n      alignItems=\"center\"\r\n      justify=\"center\"\r\n      style={{ minHeight: '100vh' }}\r\n    >\r\n      <Grid item xs={3}>\r\n        {logoutStatus === 0 && \r\n          <Button onClick={handleLogout}>\r\n            Logout\r\n          </Button>\r\n        }\r\n        {logoutStatus === 1 &&\r\n          <CircularProgress/>\r\n        }\r\n        {logoutStatus === 2 &&\r\n          'Logout successful.'\r\n        }\r\n        {logoutStatus === 3 &&\r\n          <div>\r\n            Logout failed.\r\n            <br/>\r\n            <Button onClick={handleLogout}>\r\n              Try again\r\n            </Button>\r\n          </div>\r\n        }\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}","import { useState } from 'react';\r\nimport { Link as RouterLink, useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { blue } from '@material-ui/core/colors';\r\nimport Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport Card from '@material-ui/core/Card';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n// import Radio from '@material-ui/core/Radio';\r\n// import RadioGroup from '@material-ui/core/RadioGroup';\r\n// import FormControlLabel from '@material-ui/core/FormControlLabel';\r\n// import FormLabel from '@material-ui/core/FormLabel';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport Copyright from './Copyright';\r\nimport { register } from '../utils/auth';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  wrapper: {\r\n    margin: theme.spacing(1),\r\n    position: 'relative',\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    textAlign: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  title: {\r\n    margin: theme.spacing(0, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Register(props) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  // const [role, setRole] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  // const [groupName, setGroupName] = useState('');\r\n  // const [groupCode, setGroupCode] = useState('');\r\n\r\n  const [registerStatus, setRegisterStatus] = useState(0); // 0 = not submitted, 1 = loading, 2 = success, 3 = error\r\n  const [responseMessage, setResponseMessage] = useState('');\r\n\r\n\r\n  // TODO: rework so that all group CRUD is after auth. (multiple group)\r\n  // remove extra options (parent, child, code, etc.)\r\n  // auth immediately after register\r\n\r\n  async function handleRegister(event) {\r\n    event.preventDefault();\r\n    setRegisterStatus(1);\r\n    \r\n    const result = await register(username, password, name);\r\n\r\n    if (result.success) {\r\n      setRegisterStatus(2);\r\n      // auto login?\r\n      // history.push('/login');\r\n      setResponseMessage('Registered successfully!');\r\n    } else {\r\n      setRegisterStatus(3);\r\n      setResponseMessage(result.message);\r\n    }\r\n  }\r\n\r\n  // function handleRoleChange(event) {\r\n  //   setRole(event.target.value);\r\n  // }\r\n  function handleUsernameChange(event) {\r\n    setUsername(event.target.value);\r\n  }\r\n  function handleNameChange(event) {\r\n    setName(event.target.value);\r\n  }\r\n  function handlePasswordChange(event) {\r\n    setPassword(event.target.value);\r\n  }\r\n  // function handleGroupNameChange(event) {\r\n  //   setGroupName(event.target.value);\r\n  // }\r\n  // function handleGroupCodeChange(event) {\r\n  //   setGroupCode(event.target.value);\r\n  // }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        {/*TODO: fix logo */}\r\n        {/* <img alt=\"K&M Tax Document Upload\" src={logo}/> */}\r\n        <Typography component=\"h1\" variant=\"h4\" className={classes.title}>\r\n            Chore App\r\n        </Typography>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon/>\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Register\r\n        </Typography>\r\n        <div style={{height:10}}/>\r\n        <form className={classes.form} onSubmit={handleRegister}>\r\n          {/* <RadioGroup \r\n            row \r\n            style={{alignItems:'center', justifyContent: 'center'}} \r\n            name='role' \r\n            value={role} \r\n            onChange={handleRoleChange}\r\n          >\r\n            <Typography style={{marginRight: 3}} variant='h6'>I am a:</Typography>\r\n            <FormControlLabel \r\n              style={{margin: 0}}\r\n              value=\"parent\"\r\n              control={<Radio required disabled={loginStatus === 1 || loginStatus === 2}/>}\r\n              label=\"Parent\"\r\n            />\r\n            <FormControlLabel\r\n              style={{margin: 0}} \r\n              value=\"child\" \r\n              control={<Radio required disabled={loginStatus === 1 || loginStatus === 2}/>} \r\n              label=\"Child\"\r\n            />\r\n          </RadioGroup> */}\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"username\"\r\n            label=\"Username\"\r\n            type=\"username\"\r\n            name=\"username\"\r\n            autoComplete=\"username\"\r\n            // error={emailError}\r\n            value={username}\r\n            onInput={handleUsernameChange}\r\n            autoFocus\r\n            disabled={registerStatus === 1 || registerStatus === 2}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"name\"\r\n            label=\"Name\"\r\n            type=\"name\"\r\n            name=\"name\"\r\n            autoComplete=\"name\"\r\n            // error={emailError}\r\n            value={name}\r\n            onInput={handleNameChange}\r\n            disabled={registerStatus === 1 || registerStatus === 2}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n            value={password}\r\n            onInput={handlePasswordChange}\r\n            disabled={registerStatus === 1 || registerStatus === 2}\r\n          />\r\n          {/* <Collapse in={role==='parent'}>\r\n            <TextField\r\n              variant='outlined'\r\n              margin='normal'\r\n              required={role==='parent'}\r\n              fullWidth\r\n              name='groupName'\r\n              label='Family name'\r\n              type='text'\r\n              id='groupName'\r\n              autoComplete='groupName'\r\n              value={groupName}\r\n              onInput={handleGroupNameChange}\r\n              disabled={registerStatus === 1 || registerStatus === 2}\r\n            /> \r\n          </Collapse>\r\n          <Collapse in={role==='child'}>\r\n            <TextField\r\n              variant='outlined'\r\n              margin='normal'\r\n              required={role==='child'}\r\n              fullWidth\r\n              name='groupCode'\r\n              label='Family code'\r\n              type='text'\r\n              id='groupCode'\r\n              autoComplete='groupCode'\r\n              value={groupCode}\r\n              onInput={handleGroupCodeChange}\r\n              disabled={registerStatus === 1 || registerStatus === 2}\r\n            /> \r\n          </Collapse> */}\r\n          <Collapse in={responseMessage}>\r\n            {/* <Alert severity=\"error\">{errorMessage}</Alert> */}\r\n            <Card style={{\r\n              backgroundColor: ['','','#81c784','#e57373'][registerStatus],\r\n            }}>\r\n              <div style={{display: 'flex', justifyContent: 'flex-start', alignItems: 'center', padding: 7}}>\r\n                {[null,<HourglassEmptyIcon/>,<DoneIcon/>,<ErrorIcon/>][registerStatus]}\r\n                <div style={{marginLeft: 10, marginRight: 10}}>\r\n                  {responseMessage}\r\n                </div>\r\n                <div style={{flexGrow: 1}}/>\r\n                <IconButton \r\n                  onClick={() => setResponseMessage('')}\r\n                  aria-label=\"close\"\r\n                  size=\"small\"\r\n                >\r\n                  <CloseIcon fontSize=\"inherit\"/>\r\n                </IconButton>\r\n              </div>\r\n            </Card>\r\n          </Collapse>\r\n          <div className={classes.wrapper}>\r\n            <Collapse in={registerStatus===2}>\r\n              <Button\r\n                fullWidth\r\n                variant='outlined'\r\n                style={{backgroundColor: '#81c784', marginBottom: 5}}\r\n                component={RouterLink}\r\n                to='/login'\r\n              >\r\n                Go to Log in\r\n              </Button>\r\n            </Collapse>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={registerStatus === 1 || registerStatus === 2}\r\n            >\r\n              {registerStatus === 1 ?\r\n              <CircularProgress size={24}/>\r\n              :  \"Register\"\r\n              }\r\n            </Button>\r\n          </div>\r\n          \r\n          <Grid container justify=\"flex-end\">\r\n            <Grid item>\r\n              <Link component={RouterLink} to=\"/login\" variant=\"body2\">\r\n                Already have an account? Log in\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright name=\"MAD Mobile Apps\" link=\"https://madmobileapps.com\"/>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}","import { useState } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { createGroup } from \"../utils/groups\";\r\n\r\nexport default function CreateGroup(props) {\r\n  \r\n  const [groupName, setGroupName] = useState('');\r\n\r\n  function handleGroupNameChange(event) {\r\n    setGroupName(event.target.value);\r\n  }\r\n  \r\n  async function handleCreateGroup(event){\r\n    event.preventDefault();\r\n\r\n    const result = await createGroup(groupName);\r\n    // console.log(result);\r\n    props.handleLoadGroups();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleCreateGroup}>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          id=\"groupName\"\r\n          label=\"Group name\"\r\n          type=\"groupName\"\r\n          name=\"groupName\"\r\n          autoComplete=\"groupName\"\r\n          // error={emailError}\r\n          value={groupName}\r\n          onInput={handleGroupNameChange}\r\n          autoFocus\r\n        />\r\n        <br/>\r\n        <Button variant='contained' disableElevation color='secondary' type='submit'>Create group</Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}","import { useState } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { joinGroup } from \"../utils/groups\";\r\n\r\nexport default function JoinGroup(props) {\r\n  \r\n  const [groupCode, setGroupCode] = useState('');\r\n\r\n  function handleGroupCodeChange(event) {\r\n    setGroupCode(event.target.value.toUpperCase());\r\n  }\r\n  \r\n  async function handleJoinGroup(event){\r\n    event.preventDefault();\r\n\r\n    const result = await joinGroup(groupCode);\r\n    console.log(result);\r\n    props.handleLoadGroups();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleJoinGroup}>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          id=\"groupCode\"\r\n          label=\"Group code\"\r\n          type=\"groupCode\"\r\n          name=\"groupCode\"\r\n          autoComplete=\"groupCode\"\r\n          // error={emailError}\r\n          value={groupCode}\r\n          onInput={handleGroupCodeChange}\r\n          autoFocus\r\n        />\r\n        <br/>\r\n        <Button variant='contained' disableElevation color='secondary' type='submit'>Join group</Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { Route, Switch, useParams, Link as RouterLink, useRouteMatch, Redirect, useLocation } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport List from '@material-ui/core/List';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nimport { createTask, deleteTask, getTask, listGroupTasks } from \"../utils/tasks\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) =>  ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    backgroundColor: 'rgb(0,0,0,.7)',\r\n  },\r\n  closeButton: {\r\n    backgroundColor: theme.palette.secondary.main,\r\n    color: '#111',\r\n    width: 36,\r\n    height: 36,\r\n    '&:hover': {\r\n      backgroundColor: '#f55',\r\n      color: '#fff'\r\n    }\r\n  },\r\n  chips: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  chip: {\r\n    margin: 2,\r\n  },\r\n  formControl: {\r\n    minWidth: '10rem',\r\n    marginTop: 5,\r\n    marginBottom: 10,\r\n  },\r\n  formControl2: {\r\n    minWidth: '6rem',\r\n    marginBottom: 10,\r\n    marginLeft: 7,\r\n  },\r\n  day: {\r\n    margin: 2,\r\n    color: '#bbb'\r\n  },\r\n  dayIncluded: {\r\n    margin: 2,\r\n    color: '#000',\r\n  },\r\n}));\r\n\r\n\r\nconst days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];\r\nexport default function Tasks(props) {\r\n  const { group, groupUsers } = props;\r\n  const classes = useStyles();\r\n  const { path, url } = useRouteMatch();\r\n\r\n  // list all tasks\r\n  const [tasks, setTasks] = useState(null);\r\n  const [tasksStatus, setTasksStatus] = useState(0);\r\n  const [tasksMessage, setTasksMessage] = useState('');\r\n  const [filterUser, setFilterUser] = useState('');\r\n\r\n  async function handleGetTasks() {\r\n    setTasksStatus(1);\r\n\r\n    const result = await listGroupTasks(group);\r\n    console.log(result);\r\n\r\n    if (result.success) {\r\n      setTasksStatus(2);\r\n      setTasks(result.response.Items);\r\n    } else {\r\n      setTasksStatus(3);\r\n      setTasksMessage(result.message);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (group && group.role.S === 'owner' && path ===`/groups/${group.groupID.S}/tasks`) {\r\n      handleGetTasks();\r\n    }\r\n  }, [group, path]);\r\n\r\n  // create task\r\n  const [showCreateTask, setShowCreateTask] = useState(false);\r\n  const [taskName, setTaskName] = useState('');\r\n  const [taskDescription, setTaskDescription] = useState('');\r\n  const [selectedDays, setSelectedDays] = useState([])\r\n  const [assignedUser, setAssignedUser] = useState('');\r\n\r\n  function handleCloseCreateTask() {\r\n    setShowCreateTask(false);\r\n  }\r\n\r\n  const [createTaskStatus, setCreateTaskStatus] = useState(0); // 0 = waiting, 1 = loading, 2 = success, 3 = error\r\n  const [createTaskMessage, setCreateTaskMessage] = useState(''); \r\n\r\n  async function handleCreateTask(event) {\r\n    event.preventDefault();\r\n    setCreateTaskStatus(1);\r\n\r\n    const result = await createTask(group, assignedUser, taskName, taskDescription, selectedDays);\r\n    console.log(result);\r\n\r\n    if(result.success) {\r\n      setCreateTaskStatus(2);\r\n      setCreateTaskMessage('Task created successfully!');\r\n    } else {\r\n      setCreateTaskStatus(3);\r\n      setCreateTaskMessage(result.message);\r\n    }\r\n  }\r\n\r\n  // delete task\r\n  const [deleteTaskID, setDeleteTaskID] = useState('');\r\n  const [deleteTaskStatus, setDeleteTaskStatus] = useState(0);\r\n  const [deleteTaskMessage, setDeleteTaskMessage] = useState('');\r\n\r\n  async function handleDeleteTask(task) {\r\n    setDeleteTaskStatus(1);\r\n    setDeleteTaskID(task.taskID.S);\r\n\r\n    const result = await deleteTask(task.userID.S, group, task.taskID.S);\r\n    console.log(result);\r\n    setDeleteTaskID('');\r\n\r\n    if(result.success) {\r\n      setDeleteTaskStatus(2);\r\n      handleGetTasks();\r\n    } else {\r\n      setDeleteTaskStatus(3);\r\n      setDeleteTaskMessage(result.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    group ?\r\n    <Switch>\r\n      <Route exact path={path}>\r\n        {group.role.S === 'owner' ? \r\n          <React.Fragment>\r\n            <h3>All group tasks ({tasksStatus === 2 && tasks && tasks.length})</h3>\r\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between', backgroundColor: '#eee', paddingLeft: 5, paddingRight: 10}}>\r\n              <div style={{display: 'flex', alignItems: 'center', height:'100%'}}>\r\n                <IconButton disabled={tasksStatus < 2} onClick={handleGetTasks}>\r\n                  <RefreshIcon/>\r\n                </IconButton>\r\n                <IconButton onClick={()=>setShowCreateTask(true)}>\r\n                  <AddIcon/>\r\n                </IconButton>\r\n              </div>\r\n              <div style={{display: 'flex', alignItems: 'center', justifyContent: 'flex-end'}}>\r\n                {/* <FormControl className={classes.formControl2}>\r\n                  <InputLabel>Filter day</InputLabel>\r\n                  <Select\r\n                    labelId=\"filter-user-label\"\r\n                    id=\"filter-user\"\r\n                    value={assignedUser}\r\n                    onChange={(e) => setAssignedUser(e.target.value)}\r\n                    MenuProps={{ onExited: () => {\r\n                      document.activeElement.blur();\r\n                    }}}\r\n                  >\r\n                    <MenuItem value='' key='blank-user'>No filter</MenuItem>\r\n                    {groupUsers && groupUsers.map((user) => (\r\n                      <MenuItem value={user} key={`group-user-${user.userID.S}`}>\r\n                        <div style={{\r\n                          display: 'flex',\r\n                          flexDirection: 'column',\r\n                          justifyContent: 'flex-start',\r\n                          alignItems: 'start'\r\n                        }}>\r\n                          <div>{user.userName.S}</div>\r\n                          <div style={{color: '#888'}}>{user.userID.S}</div>\r\n                        </div>\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl> */}\r\n                <FormControl className={classes.formControl2}>\r\n                  <InputLabel>Filter user</InputLabel>\r\n                  <Select\r\n                    labelId=\"filter-user-label\"\r\n                    id=\"filter-user\"\r\n                    value={filterUser}\r\n                    onChange={(e) => setFilterUser(e.target.value)}\r\n                    MenuProps={{ onExited: () => {\r\n                      document.activeElement.blur();\r\n                    }}}\r\n                  >\r\n                    <MenuItem value='' key='blank-user'>No filter</MenuItem>\r\n                    {groupUsers && groupUsers.map((user) => (\r\n                      <MenuItem value={user.userID.S} key={`group-user-${user.userID.S}`}>\r\n                        <div style={{\r\n                          display: 'flex',\r\n                          flexDirection: 'column',\r\n                          justifyContent: 'flex-start',\r\n                          alignItems: 'start'\r\n                        }}>\r\n                          <div>{user.userName.S}</div>\r\n                          <div style={{color: '#888'}}>{user.userID.S}</div>\r\n                        </div>\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </div>\r\n            </div>\r\n\r\n            {tasksStatus === 1 ? \r\n              <CircularProgress/>\r\n              : (tasksStatus === 2 && tasks) ?\r\n              <List style={{marginBottom: 30}}>\r\n                {tasks.length === 0 && 'There are currently no tasks in this group.'}\r\n                {tasks.map((task, index) => {\r\n                  if(!(filterUser && filterUser.length > 0) || filterUser === task.userID.S) {\r\n                    return (\r\n                      <ListItem \r\n                        key={`task-${index}-${task.taskID.S}`} \r\n                        button \r\n                        component={RouterLink} \r\n                        to={{\r\n                          pathname: `${url}/${task.taskID.S}`,\r\n                          state: {\r\n                            userID: task.userID.S,\r\n                          },\r\n                        }}\r\n                      >\r\n                        <div style={{display: 'flex', width: '100%', alignItems:'center', justifyContent: 'space-between'}}>\r\n                          <ListItemText \r\n                            primary={task.taskName.S.length > 10 ? `${task.taskName.S.substring(0,7)}...` : task.taskName.S}\r\n                            secondary={task.taskDescription.S.length > 50 ? `${task.taskDescription.S.substring(0, 47)}...` : task.taskDescription.S}\r\n                            style={{width: '20%'}}\r\n                          />\r\n                          <ListItemText\r\n                            primary={task.userName.S}\r\n                            secondary={task.userID.S}\r\n                          />\r\n                          <div style={{display: 'flex', justifyContent: 'flex-end', marginLeft: 10}}>  \r\n                            {days.map((day) => {\r\n                              const included = task.taskDays.SS.includes(day);\r\n                              return (\r\n                              //task.taskDays.SS.includes(day) ? <Chip key={day} label={day} style={{margin: 2}} /> : null\r\n                                <div className={included ? classes.dayIncluded : classes.day}>{day[0]}</div>\r\n                              );\r\n                            })}\r\n                          </div>\r\n                        </div>\r\n                        <ListItemSecondaryAction>\r\n                          {\r\n                            deleteTaskStatus === 1 && deleteTaskID === task.taskID.S ?\r\n                              <CircularProgress size={24}/>\r\n                            : <IconButton edge='end' onClick={() => handleDeleteTask(task)} disabled={deleteTaskStatus===1}>\r\n                                <DeleteIcon/>\r\n                              </IconButton>\r\n                          }\r\n                        </ListItemSecondaryAction>\r\n                      </ListItem>\r\n                    );\r\n                  }\r\n                })}\r\n              </List>\r\n              : \r\n              <div>\r\n                <p>{tasksMessage}</p>\r\n              </div>\r\n            }\r\n            \r\n            <Dialog\r\n              className={classes.backdrop}\r\n              key={'create-task-modal'}\r\n              open={showCreateTask}\r\n              style={{overflow: 'auto'}} \r\n              maxWidth='md'\r\n              fullWidth\r\n              onClose={handleCloseCreateTask}\r\n            >\r\n              <div style={{backgroundColor:'#eee', padding: 40}} >\r\n                <div style={{position: 'relative', float: 'right', top: -20, right: -20,}} onClick={handleCloseCreateTask}>\r\n                  <IconButton className={classes.closeButton}>\r\n                    <CloseIcon/>\r\n                  </IconButton>\r\n                </div>\r\n                <Typography variant='h5'>Create task</Typography>\r\n                <form onSubmit={handleCreateTask}>\r\n                  <TextField\r\n                    variant=\"outlined\"\r\n                    margin=\"normal\"\r\n                    required\r\n                    id=\"taskName\"\r\n                    label=\"Task name\"\r\n                    type=\"text\"\r\n                    name=\"taskName\"\r\n                    // error={emailError}\r\n                    value={taskName}\r\n                    onInput={(e) => {setTaskName(e.target.value);}}\r\n                    disabled={createTaskStatus===1}\r\n                  />\r\n                  <br/>\r\n                  <TextField\r\n                    multiline\r\n                    variant=\"outlined\"\r\n                    margin=\"normal\"\r\n                    required\r\n                    id=\"taskDescription\"\r\n                    label=\"Task description\"\r\n                    type=\"text\"\r\n                    name=\"taskDescription\"\r\n                    // error={emailError}\r\n                    value={taskDescription}\r\n                    onInput={(e) => {setTaskDescription(e.target.value);}}\r\n                    style={{width: '100%', maxWidth: 500}}\r\n                    disabled={createTaskStatus===1}\r\n                  />\r\n                  <br/>\r\n                  <FormControl required className={classes.formControl} disabled={createTaskStatus===1}>\r\n                    <InputLabel id=\"demo-mutiple-chip-label\">Days due</InputLabel>\r\n                    <Select\r\n                      labelId=\"demo-mutiple-chip-label\"\r\n                      id=\"demo-mutiple-chip\"\r\n                      multiple\r\n                      value={selectedDays}\r\n                      onChange={(e) => {setSelectedDays(e.target.value);}}\r\n                      input={<Input id=\"select-multiple-chip\" />}\r\n                      renderValue={(selected) => (\r\n                        <div className={classes.chips}>\r\n                          {days.map((value) => (\r\n                            selected.includes(value) && <Chip key={value} label={value} className={classes.chip} />\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                      MenuProps={{ onExited: () => {\r\n                        document.activeElement.blur();\r\n                      }}}\r\n                      // MenuProps={MenuProps}\r\n                    >\r\n                      {days.map((day) => (\r\n                        <MenuItem key={`day-${day}`} value={day}>\r\n                          <Checkbox checked={selectedDays.includes(day)} />\r\n                          <ListItemText primary={day}/>\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  </FormControl>\r\n                  <br/>\r\n                  <FormControl required className={classes.formControl} disabled={createTaskStatus===1}>\r\n                    <InputLabel id=\"demo-simple-select-label\">Assigned user</InputLabel>\r\n                    <Select\r\n                      labelId=\"demo-simple-select-label\"\r\n                      id=\"demo-simple-select\"\r\n                      value={assignedUser}\r\n                      onChange={(e) => setAssignedUser(e.target.value)}\r\n                      MenuProps={{ onExited: () => {\r\n                        document.activeElement.blur();\r\n                      }}}\r\n                    >\r\n                      {groupUsers && groupUsers.map((user) => (\r\n                        <MenuItem value={user} key={`group-user-${user.userID.S}`}>\r\n                          <div style={{\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            justifyContent: 'flex-start',\r\n                            alignItems: 'start'\r\n                          }}>\r\n                            <div>{user.userName.S}</div>\r\n                            <div style={{color: '#888'}}>{user.userID.S}</div>\r\n                          </div>\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  </FormControl>\r\n                  <br/>\r\n                  <br/>\r\n                  <Button style={{width: 150}} variant='contained' color='secondary' type='submit' disableElevation disabled={createTaskStatus===1}>\r\n                    {createTaskStatus === 1 ? <CircularProgress size={24}/> : 'Create task'}\r\n                  </Button>\r\n                </form>\r\n              </div>\r\n            </Dialog>\r\n          </React.Fragment> \r\n        : <Redirect to={`/groups/${group.groupID.S}`}/>\r\n        }\r\n      </Route>\r\n      <Route path={`${path}/:taskID`}>\r\n        <Task group={group}/>\r\n      </Route>\r\n    </Switch>\r\n    : <Redirect to='/groups'/>\r\n  );\r\n} \r\n\r\n\r\nfunction Task(props) {\r\n  const { group } = props;\r\n  const { taskID } = useParams();\r\n  const location = useLocation();\r\n  const classes = useStyles();\r\n\r\n  const [task, setTask] = useState(null);\r\n  const [taskStatus, setTaskStatus] = useState(0);\r\n  const [taskMessage, setTaskMessage] = useState('');\r\n\r\n  async function handleGetTask() {\r\n    setTaskStatus(1);\r\n\r\n    let userID = null;\r\n    if (location.state && location.state.userID) {\r\n      userID = location.state.userID;\r\n    }\r\n\r\n    const result = await getTask(group.groupID.S, taskID, userID);\r\n    console.log(result);\r\n\r\n    if(result.success) {\r\n      setTaskStatus(2);\r\n      setTask(result.response.Item);\r\n    } else {\r\n      setTaskStatus(3);\r\n      setTaskMessage(result.message);\r\n    }\r\n  }\r\n\r\n  useEffect(() => handleGetTask(), [taskID, group, location]);\r\n\r\n  return (\r\n    taskStatus === 1 ? (\r\n      <Grid\r\n        container\r\n        spacing={0}\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        justify=\"center\"\r\n        style={{ minHeight: '100%' }}\r\n      >\r\n        <Grid item xs={3}>\r\n          <CircularProgress/>\r\n        </Grid>\r\n      </Grid>\r\n    ) \r\n    : taskStatus === 2 && task ? (\r\n      <div>\r\n        <h3>{task.taskName.S}</h3>\r\n        <div className={classes.chips}>\r\n          {days.map((value) => (\r\n            task.taskDays.SS.includes(value) && <Chip key={value} label={value} className={classes.chip} />\r\n          ))}\r\n        </div>\r\n        <br/>\r\n        <p>{task.taskDescription.S}</p>\r\n      </div>\r\n    )\r\n    : (\r\n      <div>\r\n        {taskMessage}\r\n      </div>\r\n    )\r\n  );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { Route, Switch, useParams, Link as RouterLink, useLocation, Redirect, useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\r\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport AssignmentIcon from '@material-ui/icons/Assignment';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\n\r\nimport Tasks from './Tasks';\r\n\r\nimport { deleteGroup, listUsersInGroup, removeUserFromGroup } from \"../utils/groups\";\r\nimport useCheckMobile from \"../utils/useCheckMobile\";\r\nimport { listUserGroupTasks } from \"../utils/tasks\";\r\n\r\nexport default function Groups(props) {\r\n  return (\r\n    <Switch>\r\n      <Route exact path='/groups'>\r\n        <h3>Please select a group from the side menu.</h3>\r\n      </Route>\r\n      <Route path='/groups/:groupID'>\r\n        <Group {...props} />\r\n      </Route>\r\n    </Switch>\r\n  );\r\n}\r\n\r\n\r\nconst bottomNavLinks = [\r\n  {\r\n    path: '',\r\n    label: 'My tasks',\r\n    icon: <AssignmentIcon/>,\r\n    adminOnly: false,\r\n  },\r\n  {\r\n    path: '/users',\r\n    label: 'Users',\r\n    icon: <GroupIcon/>,\r\n    adminOnly: false,\r\n  },\r\n  {\r\n    path: '/info',\r\n    label: 'Info',\r\n    icon: <InfoIcon/>,\r\n    adminOnly: false,\r\n  },\r\n  {\r\n    path: '/tasks',\r\n    label: 'Manage',\r\n    icon: <SettingsIcon/>,\r\n    adminOnly: true,\r\n  }\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  day: {\r\n    margin: 2,\r\n    color: '#bbb'\r\n  },\r\n  dayIncluded: {\r\n    margin: 2,\r\n    color: '#000',\r\n  },\r\n}));\r\n\r\nfunction Group(props) {\r\n  const { groupID } = useParams();\r\n  const isMobile = useCheckMobile();\r\n  const location = useLocation();\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { groups, groupsStatus, handleLoadGroups } = props;\r\n\r\n  // navigation\r\n  const [navigation, setNavigation] = useState(0);\r\n  useEffect(() => {\r\n    bottomNavLinks.forEach((val, index) => {\r\n      if(location.pathname === `/groups/${groupID}${val.path}`) {\r\n        setNavigation(index);\r\n      }\r\n    });\r\n  }, [groupID, location]);\r\n\r\n  const [group, setGroup] = useState(null);\r\n  const [groupAuth, setGroupAuth] = useState(0); // 0 = waiting, 1 = loading, 2 = success, 3 = error\r\n  const [groupAuthMessage, setGroupAuthMessage] = useState('');\r\n\r\n  useEffect(checkGroups, [groupID, groupsStatus, groups]);\r\n\r\n\r\n  function checkGroups() {\r\n    // console.log(groupID);\r\n    // console.log(groups);\r\n    setGroupAuth(0);\r\n    if (groupsStatus === 1) {\r\n      setGroupAuth(1);\r\n      setGroup(null);\r\n      return;\r\n    }\r\n\r\n    if(groupsStatus !== 2) {\r\n      setGroupAuth(3);\r\n      setGroupAuthMessage('Groups not loaded. Try again later.');\r\n      setGroup(null);\r\n      return;\r\n    }\r\n\r\n    for(let i = 0; i < groups.length; i++) {\r\n      if (groups[i].groupID.S === groupID) {\r\n        setGroupAuth(2);\r\n        setGroup(groups[i]);\r\n        return;\r\n      }\r\n    }\r\n\r\n    setGroupAuth(3);\r\n    setGroupAuthMessage('You do not have access to this group.');\r\n    setGroup(null);\r\n  }\r\n\r\n\r\n  // tasks\r\n  const [userTasks, setUserTasks] = useState(null);\r\n  const [userTasksStatus, setUserTasksStatus] = useState(0); // 0 = waiting, 1 = loading, 2 = success, 3 = error\r\n  const [userTasksMessage, setUserTasksMessage] = useState('');\r\n  const days = [\r\n    'Sunday',\r\n    'Monday',\r\n    'Tuesday',\r\n    'Wednesday',\r\n    'Thursday',\r\n    'Friday',\r\n    'Saturday'\r\n  ];\r\n\r\n  async function handleGetUserTasks() {\r\n    setUserTasksStatus(1);\r\n    const result = await listUserGroupTasks(group.groupID.S);\r\n    console.log(result);\r\n\r\n    if(result.success) {\r\n      setUserTasks(result.response.Items);\r\n      setUserTasksStatus(2);\r\n    } else {\r\n      setUserTasksStatus(3);\r\n      setUserTasksMessage(result.message);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    if (group && groupAuth === 2) {\r\n      handleGetUserTasks();\r\n    }\r\n  }, [group]);\r\n\r\n\r\n  // users\r\n  const [groupUsers, setGroupUsers] = useState(null);\r\n  const [groupUsersStatus, setGroupUsersStatus] = useState(0); // 0 = waiting, 1 = loading, 2 = success, 3 = error\r\n  const [groupUsersMessage, setGroupUsersMessage] = useState('');\r\n\r\n  async function handleGetGroupUsers() {\r\n    setGroupUsersStatus(1);\r\n    const result = await listUsersInGroup(group.groupID.S);\r\n    console.log(result);\r\n\r\n    if (result.success) {\r\n      setGroupUsers(result.response.Items);\r\n      setGroupUsersStatus(2);\r\n    } else {\r\n      setGroupUsersStatus(3);\r\n      setGroupUsersMessage(result.message);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (group && groupAuth === 2) {\r\n      handleGetGroupUsers();\r\n    }\r\n  }, [group, groupAuth]);\r\n  // useEffect(() => {\r\n  //   if (group && groupAuth === 2 && bottomNavLinks[navigation].path === '/users' && !groupUsers) {\r\n  //     handleGetGroupUsers();\r\n  //   }\r\n  // }, [group, navigation]);\r\n\r\n  // delete user\r\n  const [deleteUserID, setDeleteUserID] = useState('');\r\n  const [deleteUserStatus, setDeleteUserStatus] = useState(0);\r\n  const [deleteUserMessage, setDeleteUserMessage] = useState('');\r\n\r\n  async function handleRemoveUser(user) {\r\n    setDeleteUserStatus(1);\r\n    if(user) {\r\n      setDeleteUserID(user.userID.S);\r\n    }\r\n\r\n    const result = await removeUserFromGroup(group, user);\r\n    console.log(result);\r\n\r\n    if(user) {\r\n      setDeleteUserID('');\r\n    }\r\n\r\n    if(result.success) {\r\n      if(user) { \r\n        setDeleteUserStatus(2);\r\n        handleGetGroupUsers();\r\n      } else {\r\n        await handleLoadGroups();\r\n        setDeleteUserStatus(2);\r\n        history.push('/groups');\r\n      }\r\n    } else {\r\n      setDeleteUserStatus(3);\r\n      setDeleteUserMessage(result.message);\r\n    }\r\n  }\r\n\r\n  // delete group, TODO - add func\r\n  const [deleteGroupStatus, setDeleteGroupStatus] = useState(0);\r\n  const [deleteGroupMessage, setDeleteGroupMessage] = useState('');\r\n\r\n  async function handleDeleteGroup() {\r\n    setDeleteGroupStatus(1);\r\n\r\n    const result = await deleteGroup(group);\r\n\r\n    if(result.success) {\r\n      setDeleteGroupStatus(2);\r\n    } else {\r\n      setDeleteGroupStatus(3);\r\n      setDeleteGroupMessage(result.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    groupAuth === 1 ? (\r\n      <Grid\r\n        container\r\n        spacing={0}\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        justify=\"center\"\r\n        style={{ minHeight: '100vh' }}\r\n      >\r\n        <Grid item xs={3}>\r\n          <CircularProgress/>\r\n        </Grid>\r\n      </Grid>\r\n    )\r\n    : groupAuth === 2 ? (\r\n      <React.Fragment>\r\n        <Switch>\r\n          <Route exact path={`/groups/${groupID}`}>\r\n            <div style={{display: 'flex', alignItems: 'center'}}>\r\n              <IconButton disabled={userTasksStatus < 2} onClick={handleGetUserTasks}>\r\n                <RefreshIcon/>\r\n              </IconButton>\r\n              <Typography variant='h6'>{userTasksStatus === 2 && userTasks && `You have ${userTasks.length} tasks in this group`}</Typography>\r\n            </div>\r\n            {userTasksStatus === 1 ? \r\n              <CircularProgress/>\r\n              : (userTasksStatus === 2 && userTasks) ?\r\n              <List style={{marginBottom: 30}}>\r\n                {userTasks.length === 0 && 'You do not have any tasks at this time.'}\r\n                {userTasks.map((task, index) => (\r\n                  <ListItem \r\n                    key={`user-task-${index}-${task.taskID.S}`}\r\n                    button\r\n                    component={RouterLink}\r\n                    to={`/groups/${groupID}/tasks/${task.taskID.S}`}\r\n                  >\r\n                    <div style={{display: 'flex', width: '100%', alignItems:'center', justifyContent: 'space-between'}}>\r\n                      <ListItemText \r\n                        primary={task.taskName.S}\r\n                        secondary={`${task.taskDescription.S.length > 47 ? `${task.taskDescription.S.substring(0, 47)}...` : task.taskDescription.S}`}\r\n                        // style={{overflow: 'hidden'}}\r\n                      />\r\n                      <div style={{display: 'flex', justifyContent: 'flex-end', flexGrow: 1, marginLeft: 10}}>  \r\n                        {days.map((day) => {\r\n                          const included = task.taskDays.SS.includes(day);\r\n                          return (\r\n                          //task.taskDays.SS.includes(day) ? <Chip key={day} label={day} style={{margin: 2}} /> : null\r\n                            <div className={included ? classes.dayIncluded : classes.day}>{day[0]}</div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  </ListItem>\r\n                ))}\r\n              </List>\r\n              : \r\n              <div>\r\n                <p>{userTasksMessage}</p>\r\n              </div>\r\n            }\r\n          </Route>\r\n          <Route exact path={`/groups/${groupID}/info`}>\r\n            <div>\r\n              <h3>{group.groupName.S}</h3>\r\n              <p>Group code: {group.groupID.S}</p>\r\n              <p>Your role: {group.role.S}</p>\r\n              {group.role.S === 'owner' ? \r\n                <Button variant='outlined' style={{color: '#f44336', borderColor: '#f44336'}} onClick={handleDeleteGroup}>\r\n                  Delete group\r\n                </Button>\r\n                :\r\n                <Button variant='outlined' style={{color: '#f44336', borderColor: '#f44336'}} onClick={() => handleRemoveUser()}>\r\n                  {deleteUserStatus === 1 ?\r\n                    <CircularProgress size={24}/>\r\n                    : 'Leave group'\r\n                  }\r\n                </Button>\r\n              }\r\n            </div>\r\n          </Route>\r\n          <Route exact path={`/groups/${groupID}/users`}>\r\n            <div style={{display: 'flex', alignItems: 'center'}}>\r\n              <IconButton disabled={groupUsersStatus < 2} onClick={handleGetGroupUsers}>\r\n                <RefreshIcon/>\r\n              </IconButton>\r\n              <Typography variant='h6'>{groupUsersStatus === 2 && groupUsers && `${groupUsers.length} users in group`}</Typography>\r\n            </div>\r\n            {groupUsersStatus === 1 ? \r\n              <CircularProgress/>\r\n              : groupUsersStatus === 2 && groupUsers ?\r\n              <List>\r\n                {groupUsers.map((user, index) => (\r\n                  <ListItem key={`group-user-${index}-${user.userID.S}`}>\r\n                    <ListItemText primary={user.userName.S} secondary={user.userID.S}></ListItemText>\r\n                    <ListItemText secondary={user.role.S}></ListItemText>\r\n\r\n                    <ListItemSecondaryAction>\r\n                      {group.role.S === 'owner' && user.role.S !== 'owner' && (\r\n                        deleteUserStatus === 1 && deleteUserID === user.userID.S ? \r\n                          <CircularProgress size={24}/>\r\n                        : <IconButton edge='end' onClick={() => handleRemoveUser(user)} disabled={deleteUserStatus === 1}>\r\n                            <DeleteIcon/>\r\n                          </IconButton>\r\n                      )}\r\n                    </ListItemSecondaryAction>\r\n                  </ListItem>\r\n                ))}\r\n              </List>\r\n              : \r\n              <div>\r\n                {groupUsersMessage}\r\n              </div>\r\n            }\r\n          </Route>\r\n          <Route path={`/groups/${groupID}/tasks`}>\r\n            <Tasks group={group} groupUsers={groupUsers}/>\r\n          </Route>\r\n          <Route render={() => <Redirect to={`/groups/${groupID}`}/>}/>\r\n        </Switch>\r\n        <BottomNavigation \r\n          showLabels\r\n          value={navigation}\r\n          onChange={(event, newValue) => {\r\n            // setNavigation(newValue);\r\n          }}\r\n          style={{\r\n            position: 'fixed',\r\n            bottom: 0,\r\n            left: isMobile ? 0 : '20rem',\r\n            right: 0,\r\n            backgroundColor: '#e0e0e0'\r\n          }}\r\n        >\r\n          {bottomNavLinks.map((nav, index) => {\r\n            if(group.role.S === 'owner' || !nav.adminOnly) {\r\n              return (\r\n                <BottomNavigationAction \r\n                  key={`bottom-nav-${index}`}\r\n                  label={nav.label}\r\n                  icon={nav.icon}\r\n                  component={RouterLink}\r\n                  to={`/groups/${groupID}${nav.path}`}\r\n                  style={{textDecoration: 'none'}}\r\n                />\r\n              );\r\n            } else {\r\n              return null;\r\n            }\r\n          })}\r\n        </BottomNavigation>\r\n      </React.Fragment>\r\n    )\r\n    : (\r\n      <div>\r\n        <h3>{groupAuthMessage}</h3>\r\n      </div>\r\n    )\r\n  );\r\n}","import PrivateRoute from './components/PrivateRoute';\nimport PublicRoute from './components/PublicRoute';\nimport Home from './components/Home';\nimport About from './components/About';\nimport Login from './components/Login';\nimport Logout from './components/Logout';\nimport Register from './components/Register';\nimport CreateGroup from './components/CreateGroup';\nimport JoinGroup from './components/JoinGroup';\nimport Group from './components/Groups';\n\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { HashRouter, Route, Redirect, Switch } from \"react-router-dom\";\n\nfunction App() {\n  const theme = createMuiTheme({\n    palette: {\n      primary: {\n        main: '#ffa726',\n      },\n      secondary: {\n        main: '#ce93d8',\n        // main: '#f55',\n      },\n    },\n  });\n\n  return (\n    <ThemeProvider theme={theme}>\n      <HashRouter basename='/'>\n        <Switch>\n          <PrivateRoute path='/' exact component={Home} selected='/'/>\n          <PrivateRoute path='/about' exact component={About} selected='/about'/>\n          <PrivateRoute path='/logout' exact component={Logout} />\n          <PrivateRoute path='/createGroup' exact component={CreateGroup} selected='/createGroup'/>\n          <PrivateRoute path='/joinGroup' exact component={JoinGroup} selected='/joinGroup'/>\n          <PrivateRoute path='/groups' component={Group} selected='/groups'/>\n          <PublicRoute path='/login' exact component={Login} />\n          <PublicRoute path='/register' exact component={Register} />\n          <Route render={() => <Redirect to=\"/\" />}/>\n        </Switch>\n      </HashRouter>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}