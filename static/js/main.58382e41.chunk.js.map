{"version":3,"sources":["components/Header.jsx","utils/useCheckMobile.js","utils/parseJwt.js","utils/tokens.js","utils/auth.js","utils/dynamo.js","utils/groups.js","components/PrivateRoute.jsx","components/PublicRoute.jsx","components/Home.jsx","components/About.jsx","components/Copyright.jsx","components/Login.jsx","components/Logout.jsx","components/Register.jsx","components/CreateGroup.jsx","components/JoinGroup.jsx","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","appBar","zIndex","drawer","title","margin","spacing","textTransform","textAlign","color","logoButton","padding","navButton","width","backgroundColor","palette","secondary","light","navButtonSelected","drawerDiv","height","overflow","display","flexDirection","drawerPaperMobile","drawerPaper","paperAnchorLeftMobile","paperAnchorLeft","navLinks","Header","props","classes","handleLoadGroups","groupsStatus","groups","groupsError","useEffect","isMobile","useState","windowDimension","setWindowDimension","window","innerWidth","handleResize","addEventListener","removeEventListener","useCheckMobile","onscroll","document","body","scrollTop","documentElement","setNavElevation","navElevation","drawerOpen","setDrawerOpen","hovered","setHovered","handleHovering","handleUnhovering","Fragment","AppBar","position","elevation","className","Toolbar","IconButton","onClick","Button","component","RouterLink","to","Typography","variant","style","flexGrow","Drawer","anchor","open","paper","flexShrink","onClose","List","map","text","index","ListItem","button","selected","onMouseEnter","onMouseLeave","ListItemIcon","ListItemText","primary","Divider","subheader","ListSubheader","disableSticky","marginTop","marginBottom","Grid","container","direction","alignItems","justify","item","xs","CircularProgress","group","groupName","S","groupID","parseJwt","token","base64","split","replace","jsonPayload","decodeURIComponent","atob","c","charCodeAt","toString","slice","join","JSON","parse","REFRESH_TOKEN","initialMemoryTokens","idToken","accessToken","exp","inMemoryTokens","setTokens","Math","min","getTokens","ceil","Date","now","setRefreshToken","localStorage","setItem","getRefreshToken","getItem","clearTokens","removeItem","authCognitoClient","IDENTITY_POOL_ID","REGION","COGNITO_ID","COGNITO_CLIENT_ID","cognitoClient","CognitoIdentityProviderClient","region","login","username","password","a","send","InitiateAuthCommand","AuthFlow","ClientId","AuthParameters","USERNAME","PASSWORD","response","credentials","fromCognitoIdentityPool","client","CognitoIdentityClient","identityPoolId","logins","AuthenticationResult","IdToken","AccessToken","RefreshToken","success","message","register","name","SignUpCommand","Username","Password","UserAttributes","Name","Value","ClientMetadata","process","logout","getValidTokens","refreshToken","RevokeTokenCommand","Token","curTokens","refreshTokens","dynamoClient","getNewDynamoClient","tokens","DynamoDB","generateGroupID","id","i","dig","floor","random","chr","String","fromCharCode","concat","generateValidGroupID","works","groupCode","startTime","console","log","getParams","TableName","Key","GetItemCommand","Item","createGroup","parsedToken","ownerID","ownerName","putGroupParams","N","SS","PutItemCommand","putUserGroupParams","response2","joinGroup","userID","userName","getGroupParams","updateGroupParams","ConditionExpression","UpdateExpression","ExpressionAttributeNames","ExpressionAttributeValues","UpdateItemCommand","response3","listGroups","queryParams","KeyConditionExpression","QueryCommand","PrivateRoute","Component","rest","authenticated","setAuthenticated","then","result","catch","err","setGroups","setGroupsStatus","setGroupsError","Items","render","minHeight","pathname","state","from","location","Home","About","Copyright","align","Link","href","link","getFullYear","wrapper","avatar","main","form","buttonProgress","blue","top","left","marginLeft","Login","history","useHistory","setUsername","setPassword","loginStatus","setLoginStatus","errorMessage","setErrorMessage","event","preventDefault","push","setTimeout","Container","maxWidth","CssBaseline","Avatar","onSubmit","TextField","required","fullWidth","label","type","autoComplete","value","onInput","target","autoFocus","Collapse","in","Card","justifyContent","marginRight","size","fontSize","disabled","Box","mt","Logout","logoutStatus","setLogoutStatus","handleLogout","Register","setName","registerStatus","setRegisterStatus","responseMessage","setResponseMessage","CreateGroup","setGroupName","disableElevation","JoinGroup","setGroupCode","App","createMuiTheme","ThemeProvider","basename","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.58382e41.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {Link as RouterLink } from \"react-router-dom\";\r\n\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\n\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport useCheckMobile from '../utils/useCheckMobile';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  title: {\r\n    margin: theme.spacing(1, 0, 1),\r\n    textTransform: \"none\",\r\n    textAlign: \"left\",\r\n    color: '#333',\r\n  },\r\n  logoButton: {\r\n    padding: theme.spacing(0),\r\n    textAlign: \"left\",\r\n  },\r\n  navButton: {\r\n    color: '#333',\r\n    width: '100%',\r\n    '&:hover':{\r\n      backgroundColor: theme.palette.secondary.light,\r\n    }\r\n  },\r\n  navButtonSelected: {\r\n    color: '#333',\r\n    width: '100%',\r\n    backgroundColor: theme.palette.secondary.light,\r\n    '&:hover':{\r\n      backgroundColor: '#fff',\r\n    }\r\n  },\r\n  drawerDiv: {\r\n    height: '100vh',\r\n    // backgroundColor: theme.palette.primary.main,\r\n    overflow: 'auto',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  drawerPaperMobile: {\r\n    width: '80%',\r\n  },\r\n  drawerPaper: {\r\n    width: '20rem',\r\n  },\r\n  paperAnchorLeftMobile: {\r\n    width: '80%',\r\n  },\r\n  paperAnchorLeft: {\r\n    width: '20rem',\r\n  },\r\n}));\r\n\r\nconst navLinks = [\r\n  ['Home', '/', <HomeIcon/>], \r\n  ['Create group', '/createGroup', <CreateIcon/>],\r\n  ['Join group', '/joinGroup', <AddIcon/>],\r\n];\r\n\r\nexport default function Header(props) {\r\n  const classes = useStyles();\r\n\r\n  const { handleLoadGroups, groupsStatus, groups, groupsError } = props;\r\n  useEffect(() => {\r\n    handleLoadGroups();\r\n  }, []);\r\n  \r\n  // mobile\r\n  const isMobile = useCheckMobile();\r\n\r\n  // Scroll effects\r\n  useEffect(() => {\r\n    window.onscroll = () => {\r\n      scrollFunction()\r\n    }\r\n  });\r\n\r\n  const [navElevation, setNavElevation] = useState(0);\r\n\r\n  function scrollFunction() {\r\n    const scroll = document.body.scrollTop || document.documentElement.scrollTop;\r\n    if(scroll === 0) {\r\n      setNavElevation(0);\r\n    } else {\r\n      setNavElevation(4);\r\n    }\r\n  }\r\n\r\n\r\n  // Menu \r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [hovered, setHovered] = useState(false);\r\n\r\n  function handleHovering() {\r\n    setHovered(true);\r\n  }\r\n\r\n  function handleUnhovering() {\r\n    setHovered(false);\r\n  }\r\n\r\n  // render\r\n  return (\r\n    <React.Fragment>\r\n      <AppBar position='fixed' elevation={navElevation} className={isMobile || classes.appBar}>\r\n        <Toolbar>\r\n          {isMobile && <div>\r\n            <IconButton className={classes.navButton} onClick={() => setDrawerOpen(true)}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n          </div>}\r\n          <div>\r\n            <Button component={RouterLink} to=\"/\" className={classes.logoButton}>\r\n              {/* <img src=\"http://usaco.org/current/images/usaco_logo.png\" alt=\"logo\" className={classes.logo} style={{\r\n                maxHeight: logoRatio*navHeight,\r\n                transition: navTransitionSpeed,\r\n              }}/> */}\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Chores\r\n              </Typography>\r\n            </Button>\r\n          </div>\r\n          <div style={{flexGrow: 1}}></div>\r\n          <div>\r\n            Current group\r\n          </div>\r\n          <div style={{flexGrow: 1}}></div>\r\n          {isMobile || <div>\r\n            <Button variant='contained' color='secondary' className={classes.navButton} component={RouterLink} to={'/logout'}>\r\n              Logout\r\n            </Button>\r\n          </div>}\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Drawer \r\n        variant={isMobile ? 'temporary' : 'permanent'}\r\n        anchor='left'\r\n        open={drawerOpen}\r\n        classes={{\r\n          paperAnchorLeft: isMobile ? classes.paperAnchorLeftMobile : classes.paperAnchorLeft,\r\n          paper: isMobile ? classes.drawerPaperMobile : classes.drawerPaper,\r\n        }}\r\n        style={{\r\n          width: isMobile ? '80%' : '20rem',\r\n          flexShrink: 0,\r\n        }}\r\n        onClose={() => setDrawerOpen(false)}\r\n      >\r\n        {isMobile || <Toolbar/>}\r\n        <div className={classes.drawerDiv}>\r\n          {/*isMobile && <Button\r\n            onClick={() => setDrawerOpen(false)}\r\n            className={classes.navButtonMobile}\r\n            style={{ height: `${Math.floor(100 / (navLinks.length + 2))}%`, maxHeight: 100 }}\r\n            onMouseEnter={handleHovering}\r\n            onMouseLeave={handleUnhovering}\r\n          >\r\n            <CloseIcon />\r\n          </Button>*/}\r\n          <List>\r\n            {navLinks.map((text, index) => (\r\n              <ListItem button key={`navlink-${index}`} component={RouterLink} to={text[1]}\r\n                onClick={() => setDrawerOpen(false)}\r\n                className={props.selected === text[1] && !hovered ? classes.navButtonSelected : classes.navButton}\r\n                onMouseEnter={handleHovering}\r\n                onMouseLeave={handleUnhovering}\r\n              >\r\n                <ListItemIcon>{text[2]}</ListItemIcon>\r\n                <ListItemText primary={text[0]}/>\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n          <Divider/>\r\n          <List style={{overflow:'auto'}} subheader={\r\n            <ListSubheader disableSticky>\r\n              <Typography variant='h6' style={{marginTop: '1rem',marginBottom: '.5rem'}}>\r\n                Your groups\r\n              </Typography>\r\n            </ListSubheader>\r\n          }>\r\n            {groupsStatus === 1 && \r\n              <Grid\r\n                container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justify=\"center\"\r\n              >\r\n                <Grid item xs={3}>\r\n                  <CircularProgress/>\r\n                </Grid>\r\n              </Grid>\r\n            }\r\n            {groupsStatus === 2 && \r\n              groups.map((group, index) => (\r\n                <ListItem button \r\n                  key={`group-${group.groupID.S}`} \r\n                  component={RouterLink}\r\n                  className={props.selected === '/group' && !hovered ? classes.navButtonSelected : classes.navButton}\r\n                  onMouseEnter={handleHovering}\r\n                  onMouseLeave={handleUnhovering}\r\n                >\r\n                  <ListItemText primary={group.groupName.S} secondary={group.groupID.S}></ListItemText>\r\n                </ListItem>\r\n              ))\r\n            }\r\n            {groupsStatus === 3 && \r\n              <Typography variant='body1' style={{color: '#e57373'}}>Error: {groupsError}</Typography>\r\n            }\r\n          </List>\r\n          <div style={{flexGrow: 1}}></div>\r\n          <Divider/>\r\n          <List><ListItem button component={RouterLink} to={'/logout'}\r\n            onClick={() => setDrawerOpen(false)}\r\n            className={classes.navButton}\r\n            onMouseEnter={handleHovering}\r\n            onMouseLeave={handleUnhovering}\r\n          >\r\n            <ListItemIcon><ExitToAppIcon/></ListItemIcon>\r\n            <ListItemText primary='Logout'/>\r\n          </ListItem></List>\r\n        </div>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}","import { useState, useEffect } from \"react\";\r\n\r\nconst mobileThreshold = 600;\r\n\r\nexport default function useCheckMobile() {\r\n  const [windowDimension, setWindowDimension] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setWindowDimension(window.innerWidth);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimension(window.innerWidth);\r\n    }\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []);\r\n\r\n  const isMobile = windowDimension <= mobileThreshold;\r\n  return isMobile;\r\n}","export default function parseJwt (token) {\r\n  var base64Url = token.split('.')[1];\r\n  var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n  var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {\r\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n  }).join(''));\r\n\r\n  return JSON.parse(jsonPayload);\r\n};","import parseJwt from './parseJwt';\r\n\r\nconst REFRESH_TOKEN = 'refreshToken';\r\n\r\nconst initialMemoryTokens = {\r\n  idToken: null,\r\n  accessToken: null,\r\n  exp: -1,\r\n};\r\n\r\nlet inMemoryTokens = initialMemoryTokens;\r\n\r\nexport function setTokens(idToken, accessToken) {\r\n  inMemoryTokens = {\r\n    idToken: idToken,\r\n    accessToken: accessToken,\r\n    exp: Math.min(parseJwt(idToken).exp, parseJwt(accessToken).exp),\r\n  };;\r\n}\r\n\r\nexport function getTokens() {\r\n  const curTime = Math.ceil(Date.now()/1000) + 3*60; // current time in seconds + 3 minutes\r\n\r\n  // invalid tokens\r\n  if (curTime >= inMemoryTokens.exp) {\r\n    inMemoryTokens = initialMemoryTokens;\r\n  }\r\n\r\n  return inMemoryTokens;\r\n}\r\n\r\nexport function setRefreshToken(token) {\r\n  localStorage.setItem(REFRESH_TOKEN, token);\r\n}\r\n\r\nexport function getRefreshToken() {\r\n  return localStorage.getItem(REFRESH_TOKEN);\r\n}\r\n\r\nexport function clearTokens() {\r\n  localStorage.removeItem(REFRESH_TOKEN);\r\n  inMemoryTokens = initialMemoryTokens;\r\n}","import { InitiateAuthCommand, RevokeTokenCommand, SignUpCommand } from '@aws-sdk/client-cognito-identity-provider';\r\nimport { CognitoIdentityProviderClient } from \"@aws-sdk/client-cognito-identity-provider\";\r\nimport { fromCognitoIdentityPool } from '@aws-sdk/credential-provider-cognito-identity';\r\nimport { CognitoIdentityClient } from '@aws-sdk/client-cognito-identity';\r\n\r\nimport { clearTokens, getRefreshToken, getTokens, setRefreshToken, setTokens } from './tokens';\r\n\r\nexport const IDENTITY_POOL_ID = 'us-east-2:f1368add-2f4b-47fc-8b3c-8b65a1c909cb';\r\nexport const USER_POOL_ID = 'us-east-2_ZiUGD7hem';\r\nexport const REGION ='us-east-2';\r\nexport const COGNITO_ID = 'cognito-idp.'+REGION+'.amazonaws.com/'+USER_POOL_ID;\r\nconst COGNITO_CLIENT_ID = 'deg51c9v98amenr0il094snqc';\r\n\r\nconst cognitoClient = new CognitoIdentityProviderClient({\r\n  region: REGION,\r\n});\r\n\r\nlet authCognitoClient;\r\n\r\nexport async function login(username, password) {\r\n  try {\r\n    const response = await cognitoClient.send(new InitiateAuthCommand({\r\n      AuthFlow: 'USER_PASSWORD_AUTH',\r\n      ClientId: COGNITO_CLIENT_ID,\r\n      AuthParameters: {\r\n        USERNAME: username,\r\n        PASSWORD: password,\r\n      },\r\n    }));\r\n\r\n    authCognitoClient = new CognitoIdentityProviderClient({\r\n      region: REGION,\r\n      credentials: fromCognitoIdentityPool({\r\n        client: new CognitoIdentityClient({ region: REGION }),\r\n        identityPoolId: IDENTITY_POOL_ID,\r\n        logins: {\r\n          [COGNITO_ID]: response.AuthenticationResult.IdToken,\r\n        },\r\n        // userIdentifier: username,\r\n      }),\r\n    });\r\n\r\n    setTokens(response.AuthenticationResult.IdToken, response.AuthenticationResult.AccessToken);\r\n    setRefreshToken(response.AuthenticationResult.RefreshToken);\r\n\r\n    return {success: true, message: 'success', response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\nexport async function register(username, password, name) {\r\n  try {\r\n    const response = await cognitoClient.send(new SignUpCommand({\r\n      ClientId: COGNITO_CLIENT_ID,\r\n      Username: username,\r\n      Password: password,\r\n      UserAttributes: [\r\n        {Name: 'name', Value: name},\r\n      ],\r\n      ClientMetadata: {\r\n        'secretKey': process.env.REACT_APP_AUTO_CONFIRM_KEY,\r\n      },\r\n    }));\r\n\r\n    // log in auto after regsistering? \r\n    // need to add user to dynamo table...\r\n    // admin user: create group, regular: add to group\r\n\r\n    return {success: true, message: 'success', response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\nexport async function logout() {\r\n\r\n  if (!authCognitoClient) {\r\n    authCognitoClient = new CognitoIdentityProviderClient({\r\n      region: REGION,\r\n      credentials: fromCognitoIdentityPool({\r\n        client: new CognitoIdentityClient({ region: REGION }),\r\n        identityPoolId: IDENTITY_POOL_ID,\r\n        logins: {\r\n          [COGNITO_ID]: (await getValidTokens()).idToken,\r\n        },\r\n        // userIdentifier: username,\r\n      }),\r\n    });\r\n  }\r\n\r\n  const refreshToken = getRefreshToken();\r\n  if (!refreshToken) {\r\n    return {success: true, message: 'no tokens to revoke'};\r\n  }\r\n\r\n  clearTokens();\r\n\r\n  try {\r\n    const response = await authCognitoClient.send(new RevokeTokenCommand({\r\n      ClientId: COGNITO_CLIENT_ID,\r\n      Token: refreshToken,\r\n    }));\r\n\r\n    authCognitoClient = null;\r\n    \r\n    return {success: true, message: 'logged out succesfully', response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\nexport async function getValidTokens() {\r\n  const curTokens = getTokens();\r\n\r\n  if (curTokens.idToken && curTokens.accessToken) {\r\n    return curTokens;\r\n  }\r\n\r\n  const result = await refreshTokens();\r\n\r\n  if (result.success) {\r\n    return getTokens();\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport async function refreshTokens() {\r\n  const refreshToken = getRefreshToken();\r\n  if (!refreshToken) {\r\n    return {success: false, message: 'no refresh token found.'};\r\n  }\r\n\r\n  try {\r\n    const response = await cognitoClient.send(new InitiateAuthCommand({\r\n      AuthFlow: 'REFRESH_TOKEN_AUTH',\r\n      ClientId: COGNITO_CLIENT_ID,\r\n      AuthParameters: {\r\n        REFRESH_TOKEN: refreshToken,\r\n      },\r\n    }));\r\n\r\n    setTokens(response.AuthenticationResult.IdToken, response.AuthenticationResult.AccessToken);\r\n\r\n    return {success: true, message: 'success'};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n","import  { DynamoDB } from '@aws-sdk/client-dynamodb';\r\nimport { fromCognitoIdentityPool } from '@aws-sdk/credential-provider-cognito-identity';\r\nimport { CognitoIdentityClient } from '@aws-sdk/client-cognito-identity';\r\nimport { getValidTokens, IDENTITY_POOL_ID, COGNITO_ID, REGION } from './auth';\r\n\r\nlet dynamoClient;\r\n\r\nexport async function getNewDynamoClient() {\r\n  const tokens = await getValidTokens();\r\n  if (!tokens) {\r\n    return {success: false, message: 'no valid tokens'};\r\n  }\r\n\r\n  dynamoClient = new DynamoDB({\r\n    region: REGION, \r\n    credentials: fromCognitoIdentityPool({\r\n      client: new CognitoIdentityClient({ region: REGION }),\r\n      identityPoolId: IDENTITY_POOL_ID,\r\n      logins: {\r\n        [COGNITO_ID]: tokens.idToken,\r\n      },\r\n      // userIdentifier: username,\r\n    }),\r\n  });\r\n\r\n  return {success: true, dynamoClient, tokens};\r\n}","import  { PutItemCommand, GetItemCommand, UpdateItemCommand, QueryCommand } from '@aws-sdk/client-dynamodb';\r\nimport { getValidTokens } from './auth';\r\nimport { getNewDynamoClient } from './dynamo';\r\nimport parseJwt from './parseJwt';\r\n\r\n\r\n// generates a group id using only numbers and upper case letters \r\n// 36^6 = 2*10^9 codes\r\nfunction generateGroupID() {\r\n  const length = 6;\r\n  let id = '';\r\n  for(let i = 0; i < length; i++) {\r\n    const dig = Math.floor(Math.random()*36);\r\n    let chr =''\r\n    if (dig < 10) {\r\n      chr = dig.toString();\r\n    } else {\r\n      chr = String.fromCharCode(dig - 10 + 65);\r\n    }\r\n    id = id.concat(chr);\r\n  }\r\n\r\n  return id;\r\n}\r\n\r\nexport async function generateValidGroupID(dynamoClient=null) {\r\n\r\n  if(!dynamoClient) {\r\n    const client = await getNewDynamoClient();\r\n    if (!client.success) {\r\n      return {success: false, message: client.message};\r\n    }\r\n\r\n    dynamoClient = client.dynamoClient;\r\n  }\r\n\r\n  let works = false;\r\n  let groupCode='';\r\n\r\n  const startTime = Date.now(); // cur time in ms\r\n\r\n  while(!works) {\r\n    // timeout after 5 secs\r\n    if (Date.now() - startTime > 5000){\r\n      return {success: false, message: 'timed out before valid id was found'};\r\n    }\r\n\r\n    groupCode = generateGroupID();\r\n    console.log('trying id:', groupCode);\r\n\r\n    try {\r\n      const getParams ={\r\n        TableName: 'chore-web-app-groups',\r\n        Key: {\r\n          groupID: {'S': groupCode},\r\n        },\r\n      }\r\n  \r\n      const response = await dynamoClient.send(new GetItemCommand(getParams));\r\n      \r\n      console.log(response);\r\n      if(response.Item) {\r\n        works = false;\r\n      } else {\r\n        works = true;\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n      return {success: false, message: err.message};\r\n    }\r\n  }\r\n\r\n  console.log('found valid id:', groupCode);\r\n  return {success: true, groupCode};\r\n}\r\n\r\n\r\nexport async function createGroup(groupName) {\r\n\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n\r\n  const groupID = await generateValidGroupID(dynamoClient);\r\n  if (!groupID.success) {\r\n    return {success: false, message: groupID.message};\r\n  }\r\n\r\n  const parsedToken = parseJwt(client.tokens.idToken)\r\n  const ownerID = parsedToken['cognito:username'];\r\n  const ownerName = parsedToken['name'];\r\n\r\n  try {\r\n    const putGroupParams = {\r\n      TableName: 'chore-web-app-groups',\r\n      Item: {\r\n        'groupID': {S: groupID.groupCode},\r\n        'groupName': {S: groupName},\r\n        'numUsers': {N : '1'},\r\n        'owner': {S: ownerID},\r\n        'users': {SS: [ownerID]},\r\n      },\r\n    };\r\n\r\n    const response = await dynamoClient.send(new PutItemCommand(putGroupParams));\r\n    \r\n    const putUserGroupParams = {\r\n      TableName: 'chore-web-app-usergroups',\r\n      Item: {\r\n        'userID': {S: ownerID},\r\n        'groupID': {S: groupID.groupCode},\r\n        'userName': {S: ownerName},\r\n        'groupName': {S: groupName},\r\n        'role': {S: 'owner'},\r\n      },\r\n    };\r\n\r\n    const response2 = await dynamoClient.send(new PutItemCommand(putUserGroupParams));\r\n\r\n    return {success: true, response, response2};\r\n  } catch(err) {\r\n    console.log(err);\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\nexport async function joinGroup(groupCode) {\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  const parsedToken = parseJwt(client.tokens.idToken)\r\n  const userID = parsedToken['cognito:username'];\r\n  const userName = parsedToken['name'];\r\n\r\n  try {\r\n\r\n    const getGroupParams = {\r\n      TableName: 'chore-web-app-groups',\r\n      Key: {\r\n        groupID: {'S': groupCode},\r\n      },\r\n    }\r\n\r\n    const response = await dynamoClient.send(new GetItemCommand(getGroupParams));\r\n\r\n    if (!response.Item) {\r\n      return {success: false, message: 'Invalid group code'};\r\n    }\r\n\r\n    const updateGroupParams = {\r\n      TableName: 'chore-web-app-groups',\r\n      Key: {\r\n        groupID: {'S': groupCode},\r\n      },\r\n      ConditionExpression: 'attribute_exists(#u) AND NOT contains(#u, :userID)',\r\n      UpdateExpression: 'ADD #u :userIDSet, numUsers :one',\r\n      ExpressionAttributeNames: {\r\n        '#u':'users',\r\n      },\r\n      ExpressionAttributeValues: {\r\n        ':userID': {S: userID},\r\n        ':userIDSet': {SS: [userID]},\r\n        ':one': {N: '1'},\r\n      },\r\n    };\r\n\r\n    const response2 = await dynamoClient.send(new UpdateItemCommand(updateGroupParams));\r\n\r\n    const putUserGroupParams = {\r\n      TableName: 'chore-web-app-usergroups',\r\n      Item: {\r\n        'userID': {S: userID},\r\n        'groupID': {S: groupCode},\r\n        'userName': {S: userName},\r\n        'groupName': {S: response.Item.groupName.S},\r\n        'role': {S: 'regular'},\r\n      },\r\n    };\r\n\r\n    const response3 = await dynamoClient.send(new PutItemCommand(putUserGroupParams));\r\n\r\n    return {success: true, response, response2, response3};\r\n  } catch (err) {\r\n    if(err.message === 'The conditional request failed') {\r\n      err.message = 'You are already in this group';\r\n    }\r\n    return {success: false, message: err.message};\r\n  }\r\n}\r\n\r\nexport async function listGroups() {\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  const userID = parseJwt(client.tokens.idToken)['cognito:username'];\r\n\r\n  try {\r\n    const queryParams = {\r\n      TableName: 'chore-web-app-usergroups',\r\n      KeyConditionExpression: 'userID = :user',\r\n      ExpressionAttributeValues: {\r\n        ':user': {S: userID},\r\n      },\r\n    }\r\n\r\n    const response = await dynamoClient.send(new QueryCommand(queryParams));\r\n\r\n    return {success: true, response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n\r\n}\r\n\r\nexport async function listUsersInGroup(groupID){\r\n  if(!groupID) {\r\n    return {success: false, message: 'group id requried'};\r\n  }\r\n\r\n  const client = await getNewDynamoClient();\r\n  if(!client.success) {\r\n    return {success: false, message: client.message};\r\n  }\r\n\r\n  const dynamoClient = client.dynamoClient;\r\n\r\n  try {\r\n    const queryParams = {\r\n      TableName: 'chore-web-app-usergroups',\r\n      IndexName: 'groupID-userID-index',\r\n      KeyConditionExpression: 'groupID = :group',\r\n      ExpressionAttributeValues: {\r\n        ':group': {S: groupID},\r\n      },\r\n    }\r\n\r\n    const response = await dynamoClient.send(new QueryCommand(queryParams));\r\n\r\n    return {success: true, response};\r\n  } catch (err) {\r\n    return {success: false, message: err.message};\r\n  }\r\n}","import { useState } from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport Header from \"./Header\";\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\n\r\nimport { getValidTokens } from '../utils/auth';\r\nimport { listGroups } from '../utils/groups';\r\n\r\nexport default function PrivateRoute({\r\n  component: Component, \r\n  selected, \r\n  ...rest\r\n}) {\r\n\r\n  const [authenticated, setAuthenticated] = useState(0); // 0 = awaiting, 1 = authenticated, -1 = failed\r\n\r\n  if(authenticated === 0) {\r\n    // Add your own authentication on the below line.\r\n    getValidTokens().then((result) => {\r\n      if (result) {\r\n        setAuthenticated(1);\r\n      } else {\r\n        setAuthenticated(-1);\r\n      }\r\n    }).catch((err) => {\r\n      console.log(err);\r\n      setAuthenticated(-1);\r\n    });\r\n  }\r\n\r\n  \r\n\r\n  // groups\r\n  const [groups, setGroups] = useState([]);\r\n  const [groupsStatus, setGroupsStatus] = useState(0); // 0 = nothing, 1 = loading, 2 = success, 3 = error\r\n  const [groupsError, setGroupsError] = useState('');\r\n\r\n  async function handleLoadGroups() {\r\n    setGroupsStatus(1);\r\n    const result = await listGroups();\r\n    \r\n    console.log(result);\r\n\r\n    if (result.success) {\r\n      setGroupsStatus(2);\r\n      setGroups(result.response.Items);\r\n    } else {\r\n      setGroupsStatus(3);\r\n      setGroupsError(result.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Route\r\n     {...rest} \r\n     render={props =>\r\n      (authenticated === 0) ? (\r\n        <Grid\r\n          container\r\n          spacing={0}\r\n          direction=\"column\"\r\n          alignItems=\"center\"\r\n          justify=\"center\"\r\n          style={{ minHeight: '100vh' }}\r\n        >\r\n          <Grid item xs={3}>\r\n            <CircularProgress/>\r\n          </Grid>\r\n        </Grid>\r\n      ) : (\r\n        (authenticated === 1) ? (\r\n          <div style={{display: 'flex'}}>\r\n            <Header \r\n              selected={selected} \r\n              groups={groups}\r\n              groupsStatus={groupsStatus}\r\n              groupsError={groupsError}\r\n              handleLoadGroups={handleLoadGroups}\r\n            />\r\n            <main style={{flexGrow: 1, padding: '2rem'}}>\r\n              <Toolbar/>\r\n              <Component {...props} handleLoadGroups={handleLoadGroups}/>\r\n            </main>\r\n          </div>\r\n        ) : (\r\n          <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n        )\r\n      )\r\n    }/>\r\n  );\r\n}","import { useState } from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { getValidTokens } from '../utils/auth';\r\n\r\nexport default function PrivateRoute({\r\n  component: Component,\r\n  ...rest\r\n}) {\r\n\r\n  const [authenticated, setAuthenticated] = useState(0); // 0 = awaiting, 1 = authenticated, -1 = failed\r\n\r\n  if(authenticated === 0) {\r\n    // Add your own authentication on the below line.\r\n    getValidTokens().then((result) => {\r\n      if (result) {\r\n        setAuthenticated(1);\r\n      } else {\r\n        setAuthenticated(-1);\r\n      }\r\n    }).catch((err) => {\r\n      console.log(err);\r\n      setAuthenticated(-1);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Route\r\n     {...rest} \r\n     render={props =>\r\n      (authenticated === 0) ? (\r\n        <Grid\r\n          container\r\n          spacing={0}\r\n          direction=\"column\"\r\n          alignItems=\"center\"\r\n          justify=\"center\"\r\n          style={{ minHeight: '100vh' }}\r\n        >\r\n          <Grid item xs={3}>\r\n            <CircularProgress/>\r\n          </Grid>\r\n        </Grid>\r\n      ) : (\r\n        (authenticated === -1) ? (\r\n          <div>\r\n            <main>\r\n              <Component {...props}/>\r\n            </main>\r\n          </div>\r\n        ) : (\r\n          <Redirect to={{ pathname: '/', state: { from: props.location } }} />\r\n        )\r\n      )\r\n    }/>\r\n  );\r\n}","import React from 'react';\r\n\r\nexport default function Home() {\r\n  return (\r\n    <div>\r\n      <h1>home</h1>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\n\r\nexport default function About() {\r\n  return (\r\n    <div>\r\n      <h1>about</h1>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n// import logo from './images/kmlogo-transparent.png';\r\nexport default function Copyright(props) {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright  '}\r\n      <Link color=\"inherit\" href={props.link || \"https://madmobileapps.com\"}>\r\n        {props.name || \"MAD Mobile Apps\"}\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Link as RouterLink, useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { blue } from '@material-ui/core/colors';\r\nimport Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport Card from '@material-ui/core/Card';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport Copyright from './Copyright';\r\nimport { login } from '../utils/auth';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  wrapper: {\r\n    margin: theme.spacing(1),\r\n    position: 'relative',\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    textAlign: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  title: {\r\n      margin: theme.spacing(0, 0, 2),\r\n  },\r\n  buttonProgress: {\r\n    color: blue[500],\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    marginTop: -8,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nexport default function Login(props) {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const [loginStatus, setLoginStatus] = useState(0); // 0 = not submitted, 1 = loading, 2 = success, 3 = error\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  async function handleLogin(event) {\r\n    event.preventDefault();\r\n    setLoginStatus(1);\r\n    \r\n    const result = await login(username, password);\r\n\r\n    console.log(result);\r\n\r\n    // TODO: add error handling\r\n    if(result.success) {\r\n      setLoginStatus(2);\r\n      history.push('/');\r\n    } else {\r\n      setLoginStatus(3);\r\n      setErrorMessage(result.message);\r\n      // allow resubmission after 5 seconds\r\n      setTimeout(() => setLoginStatus(0), 5000);\r\n    }\r\n  }\r\n\r\n  function handleUsernameChange(event) {\r\n    setUsername(event.target.value);\r\n  }\r\n  function handlePasswordChange(event) {\r\n    setPassword(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        {/*TODO: fix logo */}\r\n        {/* <img alt=\"K&M Tax Document Upload\" src={logo}/> */}\r\n        <Typography component=\"h1\" variant=\"h4\" className={classes.title}>\r\n            Chore App\r\n        </Typography>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon/>\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Log In\r\n        </Typography>\r\n        <form className={classes.form} onSubmit={handleLogin}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"username\"\r\n            label=\"Username\"\r\n            type=\"username\"\r\n            name=\"username\"\r\n            autoComplete=\"username\"\r\n            // error={emailError}\r\n            value={username}\r\n            onInput={handleUsernameChange}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n            value={password}\r\n            onInput={handlePasswordChange}\r\n          />\r\n          <Collapse in={errorMessage}>\r\n            {/* <Alert severity=\"error\">{errorMessage}</Alert> */}\r\n            <Card style={{backgroundColor: '#e57373'}}>\r\n              <div style={{display: 'flex', justifyContent: 'flex-start', alignItems: 'center', padding: 7}}>\r\n                <ErrorIcon/>\r\n                <div style={{marginLeft: 10, marginRight: 10}}>\r\n                  {errorMessage}\r\n                </div>\r\n                <div style={{flexGrow: 1}}/>\r\n                <IconButton \r\n                  onClick={() => setErrorMessage('')}\r\n                  aria-label=\"close\"\r\n                  size=\"small\"\r\n                >\r\n                  <CloseIcon fontSize=\"inherit\"/>\r\n                </IconButton>\r\n              </div>\r\n            </Card>\r\n          </Collapse>\r\n          <div className={classes.wrapper}>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={loginStatus === 1 || loginStatus === 2}\r\n            >\r\n              {loginStatus === 1 ?\r\n              <CircularProgress size={24}/>\r\n              :  \"Login\"\r\n              }\r\n            </Button>\r\n          </div>\r\n          \r\n          <Grid container justify=\"flex-end\">\r\n            <Grid item>\r\n              <Link component={RouterLink} to=\"/register\" variant=\"body2\">\r\n                Don't have an account? Register\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright name=\"MAD Mobile Apps\" link=\"https://madmobileapps.com\"/>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}","import { useState, useEffect } from 'react';\r\nimport { useHistory} from 'react-router-dom';\r\n\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { logout } from '../utils/auth';\r\n\r\nexport default function Logout() {\r\n  const history = useHistory();\r\n  \r\n  const [logoutStatus, setLogoutStatus] = useState(0); // 0 = not clicked, 1 = loading, 2 = success, 3 = error\r\n\r\n  useEffect(() => {\r\n    handleLogout();\r\n  }, []);\r\n\r\n  async function handleLogout() {\r\n    setLogoutStatus(1);\r\n\r\n    const result = await logout();\r\n\r\n    console.log(result);\r\n\r\n    if (result.success) {\r\n      history.push('/login');\r\n    } else {\r\n      setLogoutStatus(3);\r\n      // error handling\r\n      console.log('error logging out');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={0}\r\n      direction=\"column\"\r\n      alignItems=\"center\"\r\n      justify=\"center\"\r\n      style={{ minHeight: '100vh' }}\r\n    >\r\n      <Grid item xs={3}>\r\n        {logoutStatus === 0 && \r\n          <Button onClick={handleLogout}>\r\n            Logout\r\n          </Button>\r\n        }\r\n        {logoutStatus === 1 &&\r\n          <CircularProgress/>\r\n        }\r\n        {logoutStatus === 2 &&\r\n          'Logout successful.'\r\n        }\r\n        {logoutStatus === 3 &&\r\n          <div>\r\n            Logout failed.\r\n            <br/>\r\n            <Button onClick={handleLogout}>\r\n              Try again\r\n            </Button>\r\n          </div>\r\n        }\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}","import { useState } from 'react';\r\nimport { Link as RouterLink, useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { blue } from '@material-ui/core/colors';\r\nimport Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport Card from '@material-ui/core/Card';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n// import Radio from '@material-ui/core/Radio';\r\n// import RadioGroup from '@material-ui/core/RadioGroup';\r\n// import FormControlLabel from '@material-ui/core/FormControlLabel';\r\n// import FormLabel from '@material-ui/core/FormLabel';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport Copyright from './Copyright';\r\nimport { register } from '../utils/auth';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  wrapper: {\r\n    margin: theme.spacing(1),\r\n    position: 'relative',\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    textAlign: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  title: {\r\n    margin: theme.spacing(0, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Register(props) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  // const [role, setRole] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  // const [groupName, setGroupName] = useState('');\r\n  // const [groupCode, setGroupCode] = useState('');\r\n\r\n  const [registerStatus, setRegisterStatus] = useState(0); // 0 = not submitted, 1 = loading, 2 = success, 3 = error\r\n  const [responseMessage, setResponseMessage] = useState('');\r\n\r\n\r\n  // TODO: rework so that all group CRUD is after auth. (multiple group)\r\n  // remove extra options (parent, child, code, etc.)\r\n  // auth immediately after register\r\n\r\n  async function handleRegister(event) {\r\n    event.preventDefault();\r\n    setRegisterStatus(1);\r\n    \r\n    const result = await register(username, password, name);\r\n\r\n    if (result.success) {\r\n      setRegisterStatus(2);\r\n      // auto login?\r\n      // history.push('/login');\r\n      setResponseMessage('Registered successfully!');\r\n    } else {\r\n      setRegisterStatus(3);\r\n      setResponseMessage(result.message);\r\n    }\r\n  }\r\n\r\n  // function handleRoleChange(event) {\r\n  //   setRole(event.target.value);\r\n  // }\r\n  function handleUsernameChange(event) {\r\n    setUsername(event.target.value);\r\n  }\r\n  function handleNameChange(event) {\r\n    setName(event.target.value);\r\n  }\r\n  function handlePasswordChange(event) {\r\n    setPassword(event.target.value);\r\n  }\r\n  // function handleGroupNameChange(event) {\r\n  //   setGroupName(event.target.value);\r\n  // }\r\n  // function handleGroupCodeChange(event) {\r\n  //   setGroupCode(event.target.value);\r\n  // }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        {/*TODO: fix logo */}\r\n        {/* <img alt=\"K&M Tax Document Upload\" src={logo}/> */}\r\n        <Typography component=\"h1\" variant=\"h4\" className={classes.title}>\r\n            Chore App\r\n        </Typography>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon/>\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Register\r\n        </Typography>\r\n        <div style={{height:10}}/>\r\n        <form className={classes.form} onSubmit={handleRegister}>\r\n          {/* <RadioGroup \r\n            row \r\n            style={{alignItems:'center', justifyContent: 'center'}} \r\n            name='role' \r\n            value={role} \r\n            onChange={handleRoleChange}\r\n          >\r\n            <Typography style={{marginRight: 3}} variant='h6'>I am a:</Typography>\r\n            <FormControlLabel \r\n              style={{margin: 0}}\r\n              value=\"parent\"\r\n              control={<Radio required disabled={loginStatus === 1 || loginStatus === 2}/>}\r\n              label=\"Parent\"\r\n            />\r\n            <FormControlLabel\r\n              style={{margin: 0}} \r\n              value=\"child\" \r\n              control={<Radio required disabled={loginStatus === 1 || loginStatus === 2}/>} \r\n              label=\"Child\"\r\n            />\r\n          </RadioGroup> */}\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"username\"\r\n            label=\"Username\"\r\n            type=\"username\"\r\n            name=\"username\"\r\n            autoComplete=\"username\"\r\n            // error={emailError}\r\n            value={username}\r\n            onInput={handleUsernameChange}\r\n            autoFocus\r\n            disabled={registerStatus === 1 || registerStatus === 2}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"name\"\r\n            label=\"Name\"\r\n            type=\"name\"\r\n            name=\"name\"\r\n            autoComplete=\"name\"\r\n            // error={emailError}\r\n            value={name}\r\n            onInput={handleNameChange}\r\n            disabled={registerStatus === 1 || registerStatus === 2}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n            value={password}\r\n            onInput={handlePasswordChange}\r\n            disabled={registerStatus === 1 || registerStatus === 2}\r\n          />\r\n          {/* <Collapse in={role==='parent'}>\r\n            <TextField\r\n              variant='outlined'\r\n              margin='normal'\r\n              required={role==='parent'}\r\n              fullWidth\r\n              name='groupName'\r\n              label='Family name'\r\n              type='text'\r\n              id='groupName'\r\n              autoComplete='groupName'\r\n              value={groupName}\r\n              onInput={handleGroupNameChange}\r\n              disabled={registerStatus === 1 || registerStatus === 2}\r\n            /> \r\n          </Collapse>\r\n          <Collapse in={role==='child'}>\r\n            <TextField\r\n              variant='outlined'\r\n              margin='normal'\r\n              required={role==='child'}\r\n              fullWidth\r\n              name='groupCode'\r\n              label='Family code'\r\n              type='text'\r\n              id='groupCode'\r\n              autoComplete='groupCode'\r\n              value={groupCode}\r\n              onInput={handleGroupCodeChange}\r\n              disabled={registerStatus === 1 || registerStatus === 2}\r\n            /> \r\n          </Collapse> */}\r\n          <Collapse in={responseMessage}>\r\n            {/* <Alert severity=\"error\">{errorMessage}</Alert> */}\r\n            <Card style={{\r\n              backgroundColor: ['','','#81c784','#e57373'][registerStatus],\r\n            }}>\r\n              <div style={{display: 'flex', justifyContent: 'flex-start', alignItems: 'center', padding: 7}}>\r\n                {[null,<HourglassEmptyIcon/>,<DoneIcon/>,<ErrorIcon/>][registerStatus]}\r\n                <div style={{marginLeft: 10, marginRight: 10}}>\r\n                  {responseMessage}\r\n                </div>\r\n                <div style={{flexGrow: 1}}/>\r\n                <IconButton \r\n                  onClick={() => setResponseMessage('')}\r\n                  aria-label=\"close\"\r\n                  size=\"small\"\r\n                >\r\n                  <CloseIcon fontSize=\"inherit\"/>\r\n                </IconButton>\r\n              </div>\r\n            </Card>\r\n          </Collapse>\r\n          <div className={classes.wrapper}>\r\n            <Collapse in={registerStatus===2}>\r\n              <Button\r\n                fullWidth\r\n                variant='outlined'\r\n                style={{backgroundColor: '#81c784', marginBottom: 5}}\r\n                component={RouterLink}\r\n                to='/login'\r\n              >\r\n                Go to Log in\r\n              </Button>\r\n            </Collapse>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={registerStatus === 1 || registerStatus === 2}\r\n            >\r\n              {registerStatus === 1 ?\r\n              <CircularProgress size={24}/>\r\n              :  \"Register\"\r\n              }\r\n            </Button>\r\n          </div>\r\n          \r\n          <Grid container justify=\"flex-end\">\r\n            <Grid item>\r\n              <Link component={RouterLink} to=\"/login\" variant=\"body2\">\r\n                Already have an account? Log in\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright name=\"MAD Mobile Apps\" link=\"https://madmobileapps.com\"/>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}","import { useState } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { createGroup } from \"../utils/groups\";\r\n\r\nexport default function CreateGroup(props) {\r\n  \r\n  const [groupName, setGroupName] = useState('');\r\n\r\n  function handleGroupNameChange(event) {\r\n    setGroupName(event.target.value);\r\n  }\r\n  \r\n  async function handleCreateGroup(event){\r\n    event.preventDefault();\r\n\r\n    const result = await createGroup(groupName);\r\n    console.log(result);\r\n    props.handleLoadGroups();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleCreateGroup}>\r\n      <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            id=\"groupName\"\r\n            label=\"Group name\"\r\n            type=\"groupName\"\r\n            name=\"groupName\"\r\n            autoComplete=\"groupName\"\r\n            // error={emailError}\r\n            value={groupName}\r\n            onInput={handleGroupNameChange}\r\n            autoFocus\r\n          />\r\n        <br/>\r\n        <Button variant='contained' disableElevation color='secondary' type='submit'>Create group</Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}","import { useState } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { joinGroup } from \"../utils/groups\";\r\n\r\nexport default function JoinGroup(props) {\r\n  \r\n  const [groupCode, setGroupCode] = useState('');\r\n\r\n  function handleGroupCodeChange(event) {\r\n    setGroupCode(event.target.value);\r\n  }\r\n  \r\n  async function handleJoinGroup(event){\r\n    event.preventDefault();\r\n\r\n    const result = await joinGroup(groupCode);\r\n    console.log(result);\r\n    props.handleLoadGroups();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleJoinGroup}>\r\n      <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            id=\"groupCode\"\r\n            label=\"Group code\"\r\n            type=\"groupCode\"\r\n            name=\"groupCode\"\r\n            autoComplete=\"groupCode\"\r\n            // error={emailError}\r\n            value={groupCode}\r\n            onInput={handleGroupCodeChange}\r\n            autoFocus\r\n          />\r\n        <br/>\r\n        <Button variant='contained' disableElevation color='secondary' type='submit'>Join group</Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}","import PrivateRoute from './components/PrivateRoute';\nimport PublicRoute from './components/PublicRoute';\nimport Home from './components/Home';\nimport About from './components/About';\nimport Login from './components/Login';\nimport Logout from './components/Logout';\nimport Register from './components/Register';\nimport CreateGroup from './components/CreateGroup';\nimport JoinGroup from './components/JoinGroup';\n\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { HashRouter, Route, Redirect, Switch } from \"react-router-dom\";\n\nfunction App() {\n  const theme = createMuiTheme({\n    palette: {\n      primary: {\n        main: '#ffa726',\n      },\n      secondary: {\n        main: '#ce93d8',\n        // main: '#f55',\n      },\n    },\n  });\n\n  return (\n    <ThemeProvider theme={theme}>\n      <HashRouter basename='/'>\n        <Switch>\n          <PrivateRoute path='/' exact component={Home} selected='/'/>\n          <PrivateRoute path='/about' exact component={About} selected='/about'/>\n          <PrivateRoute path='/logout' exact component={Logout} />\n          <PrivateRoute path='/createGroup' exact component={CreateGroup} selected='/createGroup'/>\n          <PrivateRoute path='/joinGroup' exact component={JoinGroup} selected='/joinGroup'/>\n          <PrivateRoute path='/group' exact component={JoinGroup} selected='/group'/>\n          <PublicRoute path='/login' exact component={Login} />\n          <PublicRoute path='/register' exact component={Register} />\n          <Route render={() => <Redirect to=\"/\" />}/>\n        </Switch>\n      </HashRouter>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}